-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Waktu pembuatan: 29 Des 2025 pada 08.29
-- Versi server: 10.4.32-MariaDB
-- Versi PHP: 8.2.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `marketlist_mbg`
--

-- --------------------------------------------------------

--
-- Struktur dari tabel `distribusi`
--

CREATE TABLE `distribusi` (
  `id` int(11) NOT NULL,
  `no_surat_jalan` varchar(50) NOT NULL,
  `qr_code` varchar(255) NOT NULL COMMENT 'unique QR code untuk scan penerimaan',
  `qr_data` text DEFAULT NULL COMMENT 'JSON data untuk QR: no_surat_jalan, kantor_id, items',
  `tanggal_kirim` date NOT NULL,
  `request_id` int(11) DEFAULT NULL,
  `kantor_id` int(11) NOT NULL,
  `pengirim_id` int(11) NOT NULL COMMENT 'user koperasi yang kirim',
  `penerima_name` varchar(100) DEFAULT NULL COMMENT 'nama penerima di kantor',
  `penerima_user_id` int(11) DEFAULT NULL COMMENT 'user yang scan QR untuk terima',
  `tanggal_terima` datetime DEFAULT NULL,
  `scan_latitude` varchar(50) DEFAULT NULL COMMENT 'lokasi GPS saat scan',
  `scan_longitude` varchar(50) DEFAULT NULL COMMENT 'lokasi GPS saat scan',
  `status` enum('dikirim','diterima','bermasalah') DEFAULT 'dikirim',
  `keterangan` text DEFAULT NULL,
  `bukti_terima` varchar(255) DEFAULT NULL COMMENT 'upload tanda terima',
  `foto_barang` varchar(255) DEFAULT NULL COMMENT 'foto barang saat diterima',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `distribusi_detail`
--

CREATE TABLE `distribusi_detail` (
  `id` int(11) NOT NULL,
  `distribusi_id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `qty_request` decimal(10,2) DEFAULT 0.00 COMMENT 'qty yang direquest dari awal',
  `qty_kirim` decimal(10,2) NOT NULL COMMENT 'qty yang dikirim',
  `qty_terima` decimal(10,2) DEFAULT NULL COMMENT 'qty yang diterima (hasil scan)',
  `selisih` decimal(10,2) GENERATED ALWAYS AS (case when `qty_terima` is not null then `qty_terima` - `qty_kirim` else NULL end) STORED,
  `kondisi_terima` enum('lengkap','kurang','rusak','lebih') DEFAULT NULL,
  `alasan_selisih` text DEFAULT NULL COMMENT 'alasan jika ada selisih',
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `gudang_stok`
--

CREATE TABLE `gudang_stok` (
  `id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `batch_number` varchar(50) DEFAULT NULL COMMENT 'nomor batch untuk bahan baku',
  `tanggal_produksi` date DEFAULT NULL COMMENT 'tanggal produksi untuk bahan jadi',
  `tanggal_expired` date DEFAULT NULL COMMENT 'tanggal kadaluarsa',
  `qty_stok` decimal(10,2) DEFAULT 0.00,
  `qty_reserved` decimal(10,2) DEFAULT 0.00 COMMENT 'qty yang sudah dialokasikan tapi belum keluar',
  `qty_available` decimal(10,2) GENERATED ALWAYS AS (`qty_stok` - `qty_reserved`) STORED,
  `lokasi_rak` varchar(50) DEFAULT NULL,
  `kondisi` enum('baik','rusak','expired','quarantine') DEFAULT 'baik',
  `last_update` timestamp NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `harga_pasar`
--

CREATE TABLE `harga_pasar` (
  `id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `pasar_id` int(11) NOT NULL,
  `nama_pasar` varchar(100) NOT NULL,
  `bulan` int(2) NOT NULL,
  `tahun` int(4) NOT NULL,
  `harga_terendah` decimal(15,2) NOT NULL,
  `harga_tertinggi` decimal(15,2) NOT NULL,
  `harga_rata_rata` decimal(15,2) NOT NULL,
  `jumlah_hari_terdata` int(3) DEFAULT 0,
  `data_harian_json` text DEFAULT NULL COMMENT 'JSON data harga harian',
  `scraped_at` datetime NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `harga_pasar`
--

INSERT INTO `harga_pasar` (`id`, `produk_id`, `pasar_id`, `nama_pasar`, `bulan`, `tahun`, `harga_terendah`, `harga_tertinggi`, `harga_rata_rata`, `jumlah_hari_terdata`, `data_harian_json`, `scraped_at`, `created_at`, `updated_at`) VALUES
(1, 1, 3, 'Sumber', 12, 2025, 18000.00, 18000.00, 18000.00, 27, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(2, 2, 3, 'Sumber', 12, 2025, 19500.00, 19500.00, 19500.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(3, 3, 3, 'Sumber', 12, 2025, 140000.00, 140000.00, 140000.00, 27, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(4, 4, 3, 'Sumber', 12, 2025, 36000.00, 38000.00, 37464.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(5, 5, 3, 'Sumber', 12, 2025, 70000.00, 70000.00, 70000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(6, 6, 3, 'Sumber', 12, 2025, 29000.00, 31000.00, 30250.00, 22, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(7, 7, 3, 'Sumber', 12, 2025, 12500.00, 12500.00, 12500.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(8, 8, 3, 'Sumber', 12, 2025, 2000.00, 2000.00, 2000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(9, 9, 3, 'Sumber', 12, 2025, 38000.00, 38000.00, 38000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(10, 10, 3, 'Sumber', 12, 2025, 12000.00, 12000.00, 12000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(11, 11, 3, 'Sumber', 12, 2025, 55000.00, 70000.00, 65321.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(12, 12, 3, 'Sumber', 12, 2025, 26000.00, 52000.00, 40792.00, 24, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(13, 13, 3, 'Sumber', 12, 2025, 44000.00, 86000.00, 72917.00, 24, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(14, 14, 3, 'Sumber', 12, 2025, 55000.00, 70000.00, 61429.00, 21, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(15, 15, 3, 'Sumber', 12, 2025, 3000.00, 3000.00, 3000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(16, 16, 3, 'Sumber', 12, 2025, 18000.00, 18000.00, 18000.00, 26, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(17, 17, 3, 'Sumber', 12, 2025, 18000.00, 18000.00, 18000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(18, 18, 3, 'Sumber', 12, 2025, 20000.00, 21000.00, 20038.00, 26, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(19, 19, 3, 'Sumber', 12, 2025, 170000.00, 170000.00, 170000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(20, 20, 3, 'Sumber', 12, 2025, 9500.00, 9500.00, 9500.00, 27, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(21, 21, 3, 'Sumber', 12, 2025, 6000.00, 7000.00, 6964.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(22, 22, 3, 'Sumber', 12, 2025, 12500.00, 12500.00, 12500.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(23, 23, 3, 'Sumber', 12, 2025, 21000.00, 21000.00, 21000.00, 26, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(24, 24, 3, 'Sumber', 12, 2025, 32000.00, 32000.00, 32000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(25, 25, 3, 'Sumber', 12, 2025, 15000.00, 16000.00, 15483.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(26, 26, 3, 'Sumber', 12, 2025, 20000.00, 20000.00, 20000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(27, 27, 3, 'Sumber', 12, 2025, 20000.00, 20000.00, 20000.00, 27, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(28, 28, 3, 'Sumber', 12, 2025, 15000.00, 15000.00, 15000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(29, 29, 3, 'Sumber', 12, 2025, 12000.00, 12000.00, 12000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(30, 30, 3, 'Sumber', 12, 2025, 16000.00, 16000.00, 16000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(31, 31, 3, 'Sumber', 12, 2025, 35000.00, 35000.00, 35000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(32, 32, 3, 'Sumber', 12, 2025, 30000.00, 30000.00, 30000.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(33, 33, 3, 'Sumber', 12, 2025, 22000.00, 33000.00, 27172.00, 29, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(34, 34, 3, 'Sumber', 12, 2025, 30000.00, 56000.00, 40417.00, 24, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(35, 35, 3, 'Sumber', 12, 2025, 36000.00, 38000.00, 36960.00, 25, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(36, 36, 3, 'Sumber', 12, 2025, 45000.00, 45000.00, 45000.00, 22, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(37, 37, 3, 'Sumber', 12, 2025, 40000.00, 40000.00, 40000.00, 24, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(38, 38, 3, 'Sumber', 12, 2025, 110000.00, 110000.00, 110000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(39, 39, 3, 'Sumber', 12, 2025, 30000.00, 30000.00, 30000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(40, 40, 3, 'Sumber', 12, 2025, 32000.00, 32000.00, 32000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(41, 41, 3, 'Sumber', 12, 2025, 13000.00, 13000.00, 13000.00, 28, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(42, 42, 3, 'Sumber', 12, 2025, 13500.00, 13500.00, 13500.00, 26, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(43, 43, 3, 'Sumber', 12, 2025, 15500.00, 15500.00, 15500.00, 25, NULL, '2025-12-29 13:30:26', '2025-12-29 06:30:26', NULL),
(44, 1, 16, 'Pasalaran', 12, 2025, 17000.00, 17000.00, 17000.00, 16, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(45, 2, 16, 'Pasalaran', 12, 2025, 19000.00, 19000.00, 19000.00, 17, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(46, 3, 16, 'Pasalaran', 12, 2025, 130000.00, 140000.00, 136667.00, 15, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(47, 4, 16, 'Pasalaran', 12, 2025, 35000.00, 130000.00, 42667.00, 15, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(48, 5, 16, 'Pasalaran', 12, 2025, 65000.00, 65000.00, 65000.00, 15, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(49, 6, 16, 'Pasalaran', 12, 2025, 29000.00, 31000.00, 29143.00, 14, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(50, 44, 16, 'Pasalaran', 12, 2025, 3000.00, 3000.00, 3000.00, 16, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(51, 7, 16, 'Pasalaran', 12, 2025, 12000.00, 12000.00, 12000.00, 3, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(52, 45, 16, 'Pasalaran', 12, 2025, 52700.00, 52700.00, 52700.00, 1, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(53, 46, 16, 'Pasalaran', 12, 2025, 27000.00, 27000.00, 27000.00, 3, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(54, 47, 16, 'Pasalaran', 12, 2025, 28000.00, 28000.00, 28000.00, 3, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(55, 9, 16, 'Pasalaran', 12, 2025, 35000.00, 40000.00, 35714.00, 7, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:28', NULL),
(56, 10, 16, 'Pasalaran', 12, 2025, 11000.00, 11000.00, 11000.00, 16, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(57, 11, 16, 'Pasalaran', 12, 2025, 50000.00, 80000.00, 70000.00, 14, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(58, 12, 16, 'Pasalaran', 12, 2025, 40000.00, 60000.00, 50833.00, 12, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(59, 13, 16, 'Pasalaran', 12, 2025, 60000.00, 100000.00, 90000.00, 12, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(60, 14, 16, 'Pasalaran', 12, 2025, 45000.00, 70000.00, 55833.00, 12, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(61, 18, 16, 'Pasalaran', 12, 2025, 21000.00, 21000.00, 21000.00, 16, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(62, 22, 16, 'Pasalaran', 12, 2025, 12000.00, 12000.00, 12000.00, 2, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(63, 24, 16, 'Pasalaran', 12, 2025, 32000.00, 32000.00, 32000.00, 7, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(64, 48, 16, 'Pasalaran', 12, 2025, 60000.00, 60000.00, 60000.00, 7, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(65, 25, 16, 'Pasalaran', 12, 2025, 16000.00, 16000.00, 16000.00, 9, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(66, 26, 16, 'Pasalaran', 12, 2025, 20000.00, 20000.00, 20000.00, 7, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(67, 29, 16, 'Pasalaran', 12, 2025, 10000.00, 12000.00, 10444.00, 9, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(68, 32, 16, 'Pasalaran', 12, 2025, 10000.00, 12000.00, 11500.00, 8, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(69, 34, 16, 'Pasalaran', 12, 2025, 35000.00, 50000.00, 43214.00, 14, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(70, 35, 16, 'Pasalaran', 12, 2025, 35000.00, 40000.00, 35357.00, 14, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(71, 36, 16, 'Pasalaran', 12, 2025, 35000.00, 40000.00, 35385.00, 13, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(72, 37, 16, 'Pasalaran', 12, 2025, 40000.00, 45000.00, 41786.00, 14, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(73, 39, 16, 'Pasalaran', 12, 2025, 30000.00, 32000.00, 30571.00, 7, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(74, 41, 16, 'Pasalaran', 12, 2025, 15000.00, 15000.00, 15000.00, 3, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(75, 49, 16, 'Pasalaran', 12, 2025, 13000.00, 13000.00, 13000.00, 3, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(76, 42, 16, 'Pasalaran', 12, 2025, 13000.00, 13000.00, 13000.00, 17, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(77, 43, 16, 'Pasalaran', 12, 2025, 14500.00, 16000.00, 14925.00, 16, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(78, 50, 16, 'Pasalaran', 12, 2025, 17000.00, 17000.00, 17000.00, 17, NULL, '2025-12-29 13:30:28', '2025-12-29 06:30:29', NULL),
(79, 51, 17, 'Jamblang', 12, 2025, 6000.00, 6000.00, 6000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(80, 1, 17, 'Jamblang', 12, 2025, 17000.00, 18000.00, 17524.00, 21, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(81, 2, 17, 'Jamblang', 12, 2025, 19000.00, 20000.00, 19115.00, 26, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(82, 3, 17, 'Jamblang', 12, 2025, 120000.00, 140000.00, 120833.00, 24, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(83, 4, 17, 'Jamblang', 12, 2025, 32000.00, 39000.00, 35957.00, 23, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(84, 6, 17, 'Jamblang', 12, 2025, 28000.00, 32000.00, 29600.00, 25, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(85, 7, 17, 'Jamblang', 12, 2025, 8000.00, 8000.00, 8000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(86, 8, 17, 'Jamblang', 12, 2025, 2500.00, 2500.00, 2500.00, 25, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(87, 46, 17, 'Jamblang', 12, 2025, 27000.00, 27000.00, 27000.00, 1, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(88, 9, 17, 'Jamblang', 12, 2025, 32000.00, 35000.00, 33000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(89, 10, 17, 'Jamblang', 12, 2025, 12000.00, 12000.00, 12000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(90, 11, 17, 'Jamblang', 12, 2025, 40000.00, 70000.00, 61250.00, 24, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(91, 12, 17, 'Jamblang', 12, 2025, 28000.00, 55000.00, 44292.00, 24, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(92, 13, 17, 'Jamblang', 12, 2025, 50000.00, 100000.00, 80360.00, 25, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(93, 14, 17, 'Jamblang', 12, 2025, 48000.00, 80000.00, 58826.00, 23, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(94, 52, 17, 'Jamblang', 12, 2025, 6000.00, 6000.00, 6000.00, 1, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(95, 53, 17, 'Jamblang', 12, 2025, 10000.00, 10000.00, 10000.00, 22, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(96, 16, 17, 'Jamblang', 12, 2025, 16000.00, 16000.00, 16000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(97, 17, 17, 'Jamblang', 12, 2025, 18000.00, 18000.00, 18000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(98, 18, 17, 'Jamblang', 12, 2025, 20000.00, 22000.00, 21000.00, 21, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(99, 54, 17, 'Jamblang', 12, 2025, 3000.00, 3000.00, 3000.00, 1, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(100, 55, 17, 'Jamblang', 12, 2025, 3500.00, 3500.00, 3500.00, 1, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(101, 20, 17, 'Jamblang', 12, 2025, 9500.00, 12000.00, 10750.00, 2, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(102, 21, 17, 'Jamblang', 12, 2025, 7000.00, 7000.00, 7000.00, 1, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(103, 22, 17, 'Jamblang', 12, 2025, 8000.00, 8000.00, 8000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(104, 23, 17, 'Jamblang', 12, 2025, 20000.00, 21000.00, 20174.00, 23, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(105, 24, 17, 'Jamblang', 12, 2025, 32000.00, 35000.00, 33000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(106, 48, 17, 'Jamblang', 12, 2025, 60000.00, 60000.00, 60000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(107, 25, 17, 'Jamblang', 12, 2025, 14000.00, 16000.00, 15333.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(108, 26, 17, 'Jamblang', 12, 2025, 14000.00, 18000.00, 16667.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(109, 27, 17, 'Jamblang', 12, 2025, 15000.00, 15000.00, 15000.00, 1, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(110, 28, 17, 'Jamblang', 12, 2025, 6000.00, 7000.00, 6667.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(111, 29, 17, 'Jamblang', 12, 2025, 8000.00, 10000.00, 8667.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(112, 30, 17, 'Jamblang', 12, 2025, 12000.00, 14000.00, 12667.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(113, 31, 17, 'Jamblang', 12, 2025, 15000.00, 16000.00, 15500.00, 2, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(114, 32, 17, 'Jamblang', 12, 2025, 12000.00, 14000.00, 13000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(115, 33, 17, 'Jamblang', 12, 2025, 25000.00, 30000.00, 28333.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(116, 34, 17, 'Jamblang', 12, 2025, 30000.00, 48000.00, 42520.00, 25, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(117, 35, 17, 'Jamblang', 12, 2025, 30000.00, 38000.00, 33640.00, 25, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(118, 36, 17, 'Jamblang', 12, 2025, 30000.00, 45000.00, 38958.00, 24, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(119, 37, 17, 'Jamblang', 12, 2025, 36000.00, 46000.00, 40923.00, 26, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(120, 38, 17, 'Jamblang', 12, 2025, 100000.00, 100000.00, 100000.00, 2, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(121, 40, 17, 'Jamblang', 12, 2025, 32000.00, 35000.00, 33000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(122, 41, 17, 'Jamblang', 12, 2025, 18000.00, 18000.00, 18000.00, 1, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(123, 42, 17, 'Jamblang', 12, 2025, 13500.00, 14500.00, 13591.00, 22, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(124, 43, 17, 'Jamblang', 12, 2025, 15000.00, 15500.00, 15457.00, 23, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(125, 56, 17, 'Jamblang', 12, 2025, 15000.00, 15000.00, 15000.00, 3, NULL, '2025-12-29 13:30:30', '2025-12-29 06:30:30', NULL),
(126, 51, 18, 'Palimanan', 12, 2025, 7000.00, 7500.00, 7056.00, 18, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(127, 1, 18, 'Palimanan', 12, 2025, 17000.00, 18000.00, 17672.00, 29, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(128, 2, 18, 'Palimanan', 12, 2025, 18000.00, 19500.00, 18172.00, 29, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(129, 57, 18, 'Palimanan', 12, 2025, 19500.00, 20000.00, 19810.00, 21, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(130, 3, 18, 'Palimanan', 12, 2025, 130000.00, 140000.00, 132321.00, 28, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(131, 4, 18, 'Palimanan', 12, 2025, 35000.00, 40000.00, 37429.00, 28, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(132, 5, 18, 'Palimanan', 12, 2025, 65000.00, 70000.00, 69154.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(133, 6, 18, 'Palimanan', 12, 2025, 29000.00, 31000.00, 29826.00, 23, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(134, 44, 18, 'Palimanan', 12, 2025, 3000.00, 70000.00, 6012.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(135, 7, 18, 'Palimanan', 12, 2025, 12500.00, 12500.00, 12500.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(136, 58, 18, 'Palimanan', 12, 2025, 11000.00, 11500.00, 11259.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(137, 8, 18, 'Palimanan', 12, 2025, 2500.00, 2500.00, 2500.00, 6, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(138, 46, 18, 'Palimanan', 12, 2025, 26.00, 30000.00, 26334.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(139, 47, 18, 'Palimanan', 12, 2025, 30000.00, 80000.00, 41273.00, 11, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(140, 59, 18, 'Palimanan', 12, 2025, 80000.00, 80000.00, 80000.00, 13, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(141, 9, 18, 'Palimanan', 12, 2025, 30000.00, 34000.00, 32400.00, 15, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(142, 10, 18, 'Palimanan', 12, 2025, 12000.00, 12500.00, 12058.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(143, 11, 18, 'Palimanan', 12, 2025, 55000.00, 66000.00, 63679.00, 28, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(144, 12, 18, 'Palimanan', 12, 2025, 30000.00, 60000.00, 50148.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(145, 13, 18, 'Palimanan', 12, 2025, 40000.00, 100000.00, 62630.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(146, 14, 18, 'Palimanan', 12, 2025, 32000.00, 60000.00, 44913.00, 23, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(147, 52, 18, 'Palimanan', 12, 2025, 6000.00, 6500.00, 6083.00, 6, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(148, 15, 18, 'Palimanan', 12, 2025, 3000.00, 3000.00, 3000.00, 8, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(149, 53, 18, 'Palimanan', 12, 2025, 10000.00, 10000.00, 10000.00, 1, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(150, 16, 18, 'Palimanan', 12, 2025, 18000.00, 20000.00, 19125.00, 24, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(151, 17, 18, 'Palimanan', 12, 2025, 18000.00, 18000.00, 18000.00, 24, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(152, 18, 18, 'Palimanan', 12, 2025, 20000.00, 21000.00, 20955.00, 22, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(153, 54, 18, 'Palimanan', 12, 2025, 3000.00, 3500.00, 3020.00, 25, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(154, 55, 18, 'Palimanan', 12, 2025, 3800.00, 4000.00, 3992.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(155, 20, 18, 'Palimanan', 12, 2025, 9000.00, 9500.00, 9412.00, 17, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(156, 21, 18, 'Palimanan', 12, 2025, 7000.00, 9500.00, 7156.00, 16, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(157, 22, 18, 'Palimanan', 12, 2025, 12500.00, 12500.00, 12500.00, 23, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(158, 60, 18, 'Palimanan', 12, 2025, 11000.00, 11500.00, 11283.00, 23, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(159, 23, 18, 'Palimanan', 12, 2025, 20000.00, 21000.00, 20042.00, 24, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(160, 61, 18, 'Palimanan', 12, 2025, 40000.00, 40000.00, 40000.00, 1, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(161, 24, 18, 'Palimanan', 12, 2025, 30000.00, 38000.00, 32600.00, 20, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(162, 48, 18, 'Palimanan', 12, 2025, 65000.00, 70000.00, 66429.00, 14, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(163, 25, 18, 'Palimanan', 12, 2025, 14000.00, 16000.00, 14692.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(164, 26, 18, 'Palimanan', 12, 2025, 16.00, 24000.00, 16616.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(165, 27, 18, 'Palimanan', 12, 2025, 12000.00, 20000.00, 16471.00, 17, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(166, 28, 18, 'Palimanan', 12, 2025, 6000.00, 12000.00, 8074.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(167, 29, 18, 'Palimanan', 12, 2025, 6000.00, 12000.00, 9071.00, 28, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(168, 30, 18, 'Palimanan', 12, 2025, 12000.00, 24000.00, 16315.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(169, 31, 18, 'Palimanan', 12, 2025, 16000.00, 24000.00, 19840.00, 25, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(170, 32, 18, 'Palimanan', 12, 2025, 10.00, 12000.00, 9587.00, 29, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(171, 33, 18, 'Palimanan', 12, 2025, 20000.00, 36000.00, 28000.00, 28, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(172, 34, 18, 'Palimanan', 12, 2025, 30000.00, 60000.00, 45038.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(173, 35, 18, 'Palimanan', 12, 2025, 32000.00, 40000.00, 35407.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(174, 36, 18, 'Palimanan', 12, 2025, 30000.00, 40000.00, 32458.00, 24, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(175, 37, 18, 'Palimanan', 12, 2025, 40000.00, 46000.00, 41920.00, 25, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(176, 38, 18, 'Palimanan', 12, 2025, 110000.00, 170000.00, 112400.00, 25, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(177, 39, 18, 'Palimanan', 12, 2025, 30000.00, 36000.00, 30529.00, 17, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(178, 40, 18, 'Palimanan', 12, 2025, 24000.00, 35000.00, 29500.00, 2, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(179, 41, 18, 'Palimanan', 12, 2025, 13500.00, 14000.00, 13596.00, 26, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(180, 49, 18, 'Palimanan', 12, 2025, 13000.00, 13500.00, 13063.00, 8, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(181, 42, 18, 'Palimanan', 12, 2025, 13500.00, 14000.00, 13983.00, 29, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(182, 62, 18, 'Palimanan', 12, 2025, 13000.00, 13500.00, 13018.00, 28, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(183, 43, 18, 'Palimanan', 12, 2025, 15000.00, 15500.00, 15481.00, 27, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(184, 50, 18, 'Palimanan', 12, 2025, 16000.00, 16000.00, 16000.00, 1, NULL, '2025-12-29 13:30:32', '2025-12-29 06:30:32', NULL),
(185, 1, 19, 'Cipeujeuh', 12, 2025, 18000.00, 18000.00, 18000.00, 28, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(186, 2, 19, 'Cipeujeuh', 12, 2025, 20000.00, 20000.00, 20000.00, 28, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(187, 3, 19, 'Cipeujeuh', 12, 2025, 130000.00, 130000.00, 130000.00, 27, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(188, 4, 19, 'Cipeujeuh', 12, 2025, 35000.00, 40000.00, 38519.00, 27, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(189, 6, 19, 'Cipeujeuh', 12, 2025, 30000.00, 32000.00, 30542.00, 24, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(190, 10, 19, 'Cipeujeuh', 12, 2025, 12000.00, 12000.00, 12000.00, 28, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(191, 11, 19, 'Cipeujeuh', 12, 2025, 32000.00, 60000.00, 47926.00, 27, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(192, 12, 19, 'Cipeujeuh', 12, 2025, 24000.00, 48000.00, 38231.00, 26, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(193, 13, 19, 'Cipeujeuh', 12, 2025, 68000.00, 95000.00, 80481.00, 27, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(194, 14, 19, 'Cipeujeuh', 12, 2025, 48000.00, 80000.00, 60960.00, 25, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(195, 18, 19, 'Cipeujeuh', 12, 2025, 21000.00, 21000.00, 21000.00, 26, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(196, 25, 19, 'Cipeujeuh', 12, 2025, 13000.00, 15000.00, 14231.00, 26, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(197, 34, 19, 'Cipeujeuh', 12, 2025, 28000.00, 49000.00, 37538.00, 26, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(198, 35, 19, 'Cipeujeuh', 12, 2025, 32000.00, 34000.00, 32741.00, 27, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(199, 37, 19, 'Cipeujeuh', 12, 2025, 40000.00, 40000.00, 40000.00, 27, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(200, 42, 19, 'Cipeujeuh', 12, 2025, 13500.00, 14000.00, 13963.00, 27, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(201, 43, 19, 'Cipeujeuh', 12, 2025, 15500.00, 15500.00, 15500.00, 26, NULL, '2025-12-29 13:30:34', '2025-12-29 06:30:34', NULL),
(202, 51, 20, 'Babakan', 12, 2025, 7000.00, 7000.00, 7000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(203, 1, 20, 'Babakan', 12, 2025, 17000.00, 18000.00, 17038.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(204, 2, 20, 'Babakan', 12, 2025, 19500.00, 19500.00, 19500.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(205, 3, 20, 'Babakan', 12, 2025, 140000.00, 140000.00, 140000.00, 25, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(206, 4, 20, 'Babakan', 12, 2025, 38000.00, 40000.00, 39269.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(207, 6, 20, 'Babakan', 12, 2025, 29000.00, 32000.00, 30474.00, 19, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(208, 44, 20, 'Babakan', 12, 2025, 3000.00, 3500.00, 3220.00, 25, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(209, 7, 20, 'Babakan', 12, 2025, 12500.00, 12500.00, 12500.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(210, 8, 20, 'Babakan', 12, 2025, 2500.00, 2500.00, 2500.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(211, 46, 20, 'Babakan', 12, 2025, 24000.00, 26000.00, 25000.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(212, 47, 20, 'Babakan', 12, 2025, 26000.00, 42000.00, 39481.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(213, 59, 20, 'Babakan', 12, 2025, 80000.00, 80000.00, 80000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(214, 9, 20, 'Babakan', 12, 2025, 40000.00, 45000.00, 40185.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(215, 10, 20, 'Babakan', 12, 2025, 12000.00, 12000.00, 12000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(216, 11, 20, 'Babakan', 12, 2025, 40000.00, 65000.00, 54792.00, 24, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(217, 12, 20, 'Babakan', 12, 2025, 30000.00, 65000.00, 50238.00, 21, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(218, 13, 20, 'Babakan', 12, 2025, 50000.00, 90000.00, 71905.00, 21, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(219, 14, 20, 'Babakan', 12, 2025, 48000.00, 65000.00, 51526.00, 19, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(220, 15, 20, 'Babakan', 12, 2025, 3000.00, 3000.00, 3000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(221, 18, 20, 'Babakan', 12, 2025, 22000.00, 22000.00, 22000.00, 25, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(222, 54, 20, 'Babakan', 12, 2025, 3500.00, 3500.00, 3500.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(223, 55, 20, 'Babakan', 12, 2025, 4000.00, 4000.00, 4000.00, 25, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(224, 61, 20, 'Babakan', 12, 2025, 40000.00, 40000.00, 40000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(225, 24, 20, 'Babakan', 12, 2025, 38000.00, 40000.00, 38115.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(226, 48, 20, 'Babakan', 12, 2025, 70000.00, 100000.00, 71111.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(227, 63, 20, 'Babakan', 12, 2025, 80000.00, 80000.00, 80000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(228, 25, 20, 'Babakan', 12, 2025, 15000.00, 15000.00, 15000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(229, 26, 20, 'Babakan', 12, 2025, 16000.00, 20000.00, 17630.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(230, 27, 20, 'Babakan', 12, 2025, 10000.00, 16000.00, 13519.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(231, 28, 20, 'Babakan', 12, 2025, 5000.00, 6000.00, 5462.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(232, 29, 20, 'Babakan', 12, 2025, 7000.00, 10000.00, 8667.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(233, 30, 20, 'Babakan', 12, 2025, 10000.00, 10000.00, 10000.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(234, 32, 20, 'Babakan', 12, 2025, 10000.00, 14000.00, 10815.00, 27, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(235, 33, 20, 'Babakan', 12, 2025, 20000.00, 28000.00, 25385.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(236, 34, 20, 'Babakan', 12, 2025, 14000.00, 45000.00, 37909.00, 22, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(237, 35, 20, 'Babakan', 12, 2025, 30000.00, 32000.00, 31000.00, 24, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(238, 36, 20, 'Babakan', 12, 2025, 30000.00, 45000.00, 33125.00, 24, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(239, 41, 20, 'Babakan', 12, 2025, 14000.00, 14000.00, 14000.00, 26, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(240, 42, 20, 'Babakan', 12, 2025, 14000.00, 14000.00, 14000.00, 24, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(241, 43, 20, 'Babakan', 12, 2025, 15000.00, 15500.00, 15021.00, 24, NULL, '2025-12-29 13:30:36', '2025-12-29 06:30:36', NULL),
(242, 51, 21, 'Ciledug', 12, 2025, 7000.00, 7000.00, 7000.00, 28, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(243, 1, 21, 'Ciledug', 12, 2025, 18000.00, 18000.00, 18000.00, 28, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(244, 2, 21, 'Ciledug', 12, 2025, 19500.00, 19500.00, 19500.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(245, 3, 21, 'Ciledug', 12, 2025, 14000.00, 140000.00, 135154.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(246, 4, 21, 'Ciledug', 12, 2025, 38000.00, 40000.00, 39370.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(247, 6, 21, 'Ciledug', 12, 2025, 29000.00, 32000.00, 30423.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(248, 44, 21, 'Ciledug', 12, 2025, 3500.00, 3500.00, 3500.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(249, 7, 21, 'Ciledug', 12, 2025, 12500.00, 12500.00, 12500.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(250, 58, 21, 'Ciledug', 12, 2025, 11000.00, 11000.00, 11000.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(251, 8, 21, 'Ciledug', 12, 2025, 2500.00, 2500.00, 2500.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(252, 46, 21, 'Ciledug', 12, 2025, 25000.00, 26000.00, 25444.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(253, 47, 21, 'Ciledug', 12, 2025, 35000.00, 42000.00, 38185.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(254, 59, 21, 'Ciledug', 12, 2025, 80000.00, 80000.00, 80000.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(255, 9, 21, 'Ciledug', 12, 2025, 38000.00, 38000.00, 38000.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(256, 10, 21, 'Ciledug', 12, 2025, 12000.00, 12000.00, 12000.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(257, 11, 21, 'Ciledug', 12, 2025, 40000.00, 70000.00, 62593.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(258, 12, 21, 'Ciledug', 12, 2025, 26000.00, 60000.00, 44889.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(259, 13, 21, 'Ciledug', 12, 2025, 50000.00, 90000.00, 76778.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(260, 14, 21, 'Ciledug', 12, 2025, 48000.00, 60000.00, 53923.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(261, 52, 21, 'Ciledug', 12, 2025, 6000.00, 6000.00, 6000.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(262, 15, 21, 'Ciledug', 12, 2025, 3000.00, 3000.00, 3000.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(263, 53, 21, 'Ciledug', 12, 2025, 10000.00, 12000.00, 11704.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(264, 16, 21, 'Ciledug', 12, 2025, 18000.00, 18000.00, 18000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(265, 17, 21, 'Ciledug', 12, 2025, 19000.00, 19000.00, 19000.00, 27, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(266, 18, 21, 'Ciledug', 12, 2025, 21000.00, 21000.00, 21000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(267, 19, 21, 'Ciledug', 12, 2025, 170000.00, 170000.00, 170000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(268, 54, 21, 'Ciledug', 12, 2025, 3500.00, 3500.00, 3500.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(269, 55, 21, 'Ciledug', 12, 2025, 4000.00, 4000.00, 4000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(270, 20, 21, 'Ciledug', 12, 2025, 9500.00, 9500.00, 9500.00, 25, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(271, 21, 21, 'Ciledug', 12, 2025, 7000.00, 7000.00, 7000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(272, 22, 21, 'Ciledug', 12, 2025, 12500.00, 12500.00, 12500.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(273, 60, 21, 'Ciledug', 12, 2025, 11000.00, 11000.00, 11000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(274, 61, 21, 'Ciledug', 12, 2025, 40000.00, 40000.00, 40000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(275, 24, 21, 'Ciledug', 12, 2025, 32000.00, 32000.00, 32000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(276, 48, 21, 'Ciledug', 12, 2025, 70000.00, 70000.00, 70000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(277, 63, 21, 'Ciledug', 12, 2025, 80000.00, 80000.00, 80000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(278, 25, 21, 'Ciledug', 12, 2025, 15000.00, 15000.00, 15000.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(279, 26, 21, 'Ciledug', 12, 2025, 16000.00, 20000.00, 17654.00, 26, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(280, 27, 21, 'Ciledug', 12, 2025, 11000.00, 16000.00, 13542.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(281, 28, 21, 'Ciledug', 12, 2025, 5000.00, 6000.00, 5520.00, 25, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(282, 29, 21, 'Ciledug', 12, 2025, 12000.00, 12000.00, 12000.00, 25, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(283, 30, 21, 'Ciledug', 12, 2025, 16000.00, 16000.00, 16000.00, 25, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(284, 31, 21, 'Ciledug', 12, 2025, 16000.00, 24000.00, 21120.00, 25, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(285, 32, 21, 'Ciledug', 12, 2025, 10000.00, 16000.00, 10833.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(286, 33, 21, 'Ciledug', 12, 2025, 24000.00, 33000.00, 27917.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(287, 34, 21, 'Ciledug', 12, 2025, 30000.00, 48000.00, 42417.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(288, 35, 21, 'Ciledug', 12, 2025, 32000.00, 36000.00, 35500.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(289, 36, 21, 'Ciledug', 12, 2025, 35000.00, 35000.00, 35000.00, 22, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(290, 37, 21, 'Ciledug', 12, 2025, 40000.00, 40000.00, 40000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(291, 38, 21, 'Ciledug', 12, 2025, 110000.00, 110000.00, 110000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(292, 39, 21, 'Ciledug', 12, 2025, 30000.00, 30000.00, 30000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(293, 40, 21, 'Ciledug', 12, 2025, 32000.00, 32000.00, 32000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(294, 41, 21, 'Ciledug', 12, 2025, 14000.00, 14000.00, 14000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(295, 49, 21, 'Ciledug', 12, 2025, 13000.00, 13000.00, 13000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(296, 64, 21, 'Ciledug', 12, 2025, 16000.00, 16000.00, 16000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(297, 42, 21, 'Ciledug', 12, 2025, 14000.00, 14000.00, 14000.00, 24, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL),
(298, 43, 21, 'Ciledug', 12, 2025, 15000.00, 15000.00, 15000.00, 23, NULL, '2025-12-29 13:30:38', '2025-12-29 06:30:38', NULL);

-- --------------------------------------------------------

--
-- Struktur dari tabel `jenis_barang`
--

CREATE TABLE `jenis_barang` (
  `id` int(11) NOT NULL,
  `kode_jenis` varchar(20) NOT NULL,
  `nama_jenis` varchar(100) NOT NULL,
  `deskripsi` text DEFAULT NULL,
  `status` enum('aktif','nonaktif') DEFAULT 'aktif',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `jenis_barang`
--

INSERT INTO `jenis_barang` (`id`, `kode_jenis`, `nama_jenis`, `deskripsi`, `status`, `created_at`) VALUES
(1, 'BB', 'Bahan Baku', 'Bahan mentah yang akan diproses menjadi produk jadi', 'aktif', '2025-12-27 03:40:34'),
(2, 'BJ', 'Bahan Jadi', 'Produk yang sudah jadi dan siap distribusi', 'aktif', '2025-12-27 03:40:34'),
(3, 'PK', 'Perlengkapan Kantor', 'Alat tulis dan perlengkapan operasional kantor', 'aktif', '2025-12-27 03:40:34');

-- --------------------------------------------------------

--
-- Struktur dari tabel `kantor`
--

CREATE TABLE `kantor` (
  `id` int(11) NOT NULL,
  `kode_kantor` varchar(20) NOT NULL,
  `nama_kantor` varchar(100) NOT NULL,
  `alamat` text DEFAULT NULL,
  `no_telp` varchar(20) DEFAULT NULL,
  `pic_name` varchar(100) DEFAULT NULL,
  `pic_phone` varchar(20) DEFAULT NULL,
  `status` enum('aktif','nonaktif') DEFAULT 'aktif',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `kantor`
--

INSERT INTO `kantor` (`id`, `kode_kantor`, `nama_kantor`, `alamat`, `no_telp`, `pic_name`, `pic_phone`, `status`, `created_at`, `updated_at`) VALUES
(1, 'KTR001', 'Kantor Cabang 1', 'Alamat Kantor 1', NULL, NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL),
(2, 'KTR002', 'Kantor Cabang 2', 'Alamat Kantor 2', NULL, NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL),
(3, 'KTR003', 'Kantor Cabang 3', 'Alamat Kantor 3', NULL, NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL),
(4, 'KTR004', 'Kantor Cabang 4', 'Alamat Kantor 4', NULL, NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL),
(5, 'KTR005', 'Kantor Cabang 5', 'Alamat Kantor 5', NULL, NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL),
(6, 'KTR006', 'Kantor Cabang 6', 'Alamat Kantor 6', NULL, NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL);

-- --------------------------------------------------------

--
-- Struktur dari tabel `kartu_stok`
--

CREATE TABLE `kartu_stok` (
  `id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `tanggal` datetime NOT NULL,
  `jenis_transaksi` enum('masuk','keluar','opname','adjustment') NOT NULL,
  `referensi_tipe` varchar(50) DEFAULT NULL COMMENT 'penerimaan/distribusi/opname/adjustment',
  `referensi_id` int(11) DEFAULT NULL,
  `qty` decimal(10,2) NOT NULL,
  `saldo_awal` decimal(10,2) NOT NULL,
  `saldo_akhir` decimal(10,2) NOT NULL,
  `keterangan` text DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `kategori`
--

CREATE TABLE `kategori` (
  `id` int(11) NOT NULL,
  `kode_kategori` varchar(20) NOT NULL,
  `nama_kategori` varchar(100) NOT NULL,
  `jenis_barang_id` int(11) NOT NULL COMMENT 'bahan baku/jadi/perlengkapan',
  `parent_id` int(11) DEFAULT NULL,
  `deskripsi` text DEFAULT NULL,
  `status` enum('aktif','nonaktif') DEFAULT 'aktif',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `kategori`
--

INSERT INTO `kategori` (`id`, `kode_kategori`, `nama_kategori`, `jenis_barang_id`, `parent_id`, `deskripsi`, `status`, `created_at`, `updated_at`) VALUES
(1, 'BB-001', 'Bahan Kimia', 1, NULL, 'Bahan kimia untuk produksi', 'aktif', '2025-12-27 03:40:34', NULL),
(2, 'BB-002', 'Bahan Plastik', 1, NULL, 'Bahan baku plastik', 'aktif', '2025-12-27 03:40:34', NULL),
(3, 'BB-003', 'Bahan Logam', 1, NULL, 'Bahan baku logam', 'aktif', '2025-12-27 03:40:34', NULL),
(4, 'BB-004', 'Bahan Tekstil', 1, NULL, 'Bahan baku tekstil', 'aktif', '2025-12-27 03:40:34', NULL),
(5, 'BJ-001', 'Produk A', 2, NULL, 'Produk jadi kategori A', 'aktif', '2025-12-27 03:40:34', NULL),
(6, 'BJ-002', 'Produk B', 2, NULL, 'Produk jadi kategori B', 'aktif', '2025-12-27 03:40:34', NULL),
(7, 'BJ-003', 'Produk C', 2, NULL, 'Produk jadi kategori C', 'aktif', '2025-12-27 03:40:34', NULL),
(8, 'PK-001', 'Alat Tulis', 3, NULL, 'Alat tulis kantor', 'aktif', '2025-12-27 03:40:34', NULL),
(9, 'PK-002', 'Kertas & Dokumen', 3, NULL, 'Kertas dan keperluan dokumen', 'aktif', '2025-12-27 03:40:34', NULL),
(10, 'PK-003', 'Peralatan Elektronik', 3, NULL, 'Peralatan elektronik kantor', 'aktif', '2025-12-27 03:40:34', NULL),
(11, 'PK-004', 'Perlengkapan Umum', 3, NULL, 'Perlengkapan kantor lainnya', 'aktif', '2025-12-27 03:40:34', NULL);

-- --------------------------------------------------------

--
-- Struktur dari tabel `log_activity`
--

CREATE TABLE `log_activity` (
  `id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `activity` varchar(255) NOT NULL,
  `module` varchar(50) DEFAULT NULL COMMENT 'request/pembelanjaan/distribusi/dll',
  `reference_id` int(11) DEFAULT NULL,
  `ip_address` varchar(45) DEFAULT NULL,
  `user_agent` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `log_activity`
--

INSERT INTO `log_activity` (`id`, `user_id`, `activity`, `module`, `reference_id`, `ip_address`, `user_agent`, `created_at`) VALUES
(1, 1, 'Login ke sistem', 'auth', NULL, '::1', NULL, '2025-12-27 03:52:23'),
(2, 1, 'Logout dari sistem', 'auth', NULL, '::1', NULL, '2025-12-29 03:26:14'),
(3, 1, 'Login ke sistem', 'auth', NULL, '::1', NULL, '2025-12-29 03:26:31'),
(4, 1, 'Login ke sistem', 'auth', NULL, '::1', NULL, '2025-12-29 06:27:02'),
(5, 1, 'Memulai scraping data harga pasar untuk 12-2025', 'scraping', NULL, '::1', NULL, '2025-12-29 06:30:25'),
(6, 1, 'Scraping selesai: 7/7 pasar, 298 komoditas', 'scraping', NULL, '::1', NULL, '2025-12-29 06:30:39'),
(7, 1, 'Membuat menu harian: Nasi Goreng', 'menu', 1, '::1', NULL, '2025-12-29 07:15:59'),
(8, 1, 'Menyetujui menu: Nasi Goreng', 'menu', 1, '::1', NULL, '2025-12-29 07:19:11'),
(9, 1, 'Menyetujui menu: Nasi Goreng', 'menu', 1, '::1', NULL, '2025-12-29 07:20:34');

-- --------------------------------------------------------

--
-- Struktur dari tabel `log_scan_qr`
--

CREATE TABLE `log_scan_qr` (
  `id` int(11) NOT NULL,
  `qr_code` varchar(255) NOT NULL,
  `distribusi_id` int(11) DEFAULT NULL,
  `user_id` int(11) DEFAULT NULL COMMENT 'user yang scan',
  `scan_time` datetime NOT NULL,
  `scan_status` enum('success','failed','duplicate') NOT NULL,
  `device_info` text DEFAULT NULL COMMENT 'info device yang scan',
  `ip_address` varchar(45) DEFAULT NULL,
  `latitude` varchar(50) DEFAULT NULL,
  `longitude` varchar(50) DEFAULT NULL,
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `menu_harian`
--

CREATE TABLE `menu_harian` (
  `id` int(11) NOT NULL,
  `no_menu` varchar(50) NOT NULL,
  `tanggal_menu` date NOT NULL,
  `nama_menu` varchar(200) NOT NULL,
  `deskripsi` text DEFAULT NULL,
  `total_porsi` int(11) DEFAULT 0 COMMENT 'Total portions to be prepared',
  `kantor_id` int(11) DEFAULT NULL COMMENT 'Target office, NULL = all offices',
  `status` enum('draft','approved','processing','completed','cancelled') DEFAULT 'draft',
  `created_by` int(11) NOT NULL,
  `approved_by` int(11) DEFAULT NULL,
  `approved_at` datetime DEFAULT NULL,
  `notes` text DEFAULT NULL COMMENT 'Additional notes',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `menu_harian`
--

INSERT INTO `menu_harian` (`id`, `no_menu`, `tanggal_menu`, `nama_menu`, `deskripsi`, `total_porsi`, `kantor_id`, `status`, `created_by`, `approved_by`, `approved_at`, `notes`, `created_at`, `updated_at`) VALUES
(1, 'MENU/2025/12/001', '2025-12-29', 'Nasi Goreng', '', 30, NULL, 'approved', 1, 1, '2025-12-29 14:20:34', NULL, '2025-12-29 07:15:59', '2025-12-29 07:20:34');

-- --------------------------------------------------------

--
-- Struktur dari tabel `menu_harian_detail`
--

CREATE TABLE `menu_harian_detail` (
  `id` int(11) NOT NULL,
  `menu_id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `qty_needed` decimal(10,2) NOT NULL COMMENT 'Total quantity needed',
  `qty_from_warehouse` decimal(10,2) DEFAULT 0.00 COMMENT 'Quantity from warehouse stock',
  `qty_to_purchase` decimal(10,2) DEFAULT 0.00 COMMENT 'Quantity to buy from market',
  `warehouse_reserved` tinyint(1) DEFAULT 0 COMMENT '1 if warehouse stock reserved',
  `market_recommendation` text DEFAULT NULL COMMENT 'JSON: {pasar_id, nama_pasar, harga}',
  `pembelanjaan_id` int(11) DEFAULT NULL COMMENT 'Link to purchase record',
  `purchase_status` enum('pending','purchased','received') DEFAULT 'pending',
  `distribution_status` enum('pending','distributed','completed') DEFAULT 'pending',
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `menu_harian_detail`
--

INSERT INTO `menu_harian_detail` (`id`, `menu_id`, `produk_id`, `qty_needed`, `qty_from_warehouse`, `qty_to_purchase`, `warehouse_reserved`, `market_recommendation`, `pembelanjaan_id`, `purchase_status`, `distribution_status`, `keterangan`, `created_at`, `updated_at`) VALUES
(1, 1, 43, 30.00, 0.00, 30.00, 0, '{\"pasar_id\":16,\"nama_pasar\":\"Pasalaran\",\"harga_terendah\":\"14500.00\",\"harga_rata_rata\":\"14925.00\",\"scraped_at\":\"2025-12-29 13:30:28\"}', NULL, 'pending', 'pending', '', '2025-12-29 07:15:59', NULL);

-- --------------------------------------------------------

--
-- Struktur dari tabel `pembayaran_piutang`
--

CREATE TABLE `pembayaran_piutang` (
  `id` int(11) NOT NULL,
  `piutang_id` int(11) NOT NULL,
  `tanggal_bayar` date NOT NULL,
  `jumlah_bayar` decimal(15,2) NOT NULL,
  `metode_bayar` enum('tunai','transfer','giro','lainnya') DEFAULT 'tunai',
  `no_referensi` varchar(50) DEFAULT NULL COMMENT 'no transfer/giro',
  `bukti_bayar` varchar(255) DEFAULT NULL,
  `keterangan` text DEFAULT NULL,
  `user_id` int(11) NOT NULL COMMENT 'user yang input pembayaran',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `pembelanjaan`
--

CREATE TABLE `pembelanjaan` (
  `id` int(11) NOT NULL,
  `no_pembelanjaan` varchar(50) NOT NULL,
  `tanggal` date NOT NULL,
  `periode_type` enum('harian','mingguan','bulanan') NOT NULL,
  `periode_value` varchar(20) DEFAULT NULL COMMENT 'misal: 2024-01, Week-52-2024, 2024-01-15',
  `supplier_id` int(11) DEFAULT NULL,
  `request_id` int(11) DEFAULT NULL COMMENT 'jika terkait request',
  `total_belanja` decimal(15,2) DEFAULT 0.00,
  `bukti_belanja` varchar(255) DEFAULT NULL COMMENT 'upload nota/struk',
  `keterangan` text DEFAULT NULL,
  `user_id` int(11) NOT NULL COMMENT 'petugas yang belanja',
  `status` enum('draft','selesai') DEFAULT 'draft',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `pembelanjaan_detail`
--

CREATE TABLE `pembelanjaan_detail` (
  `id` int(11) NOT NULL,
  `pembelanjaan_id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `qty` decimal(10,2) NOT NULL,
  `harga_satuan` decimal(15,2) NOT NULL,
  `subtotal` decimal(15,2) GENERATED ALWAYS AS (`qty` * `harga_satuan`) STORED,
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `penerimaan_barang`
--

CREATE TABLE `penerimaan_barang` (
  `id` int(11) NOT NULL,
  `no_penerimaan` varchar(50) NOT NULL,
  `tanggal_terima` date NOT NULL,
  `pembelanjaan_id` int(11) DEFAULT NULL,
  `supplier_id` int(11) DEFAULT NULL,
  `no_surat_jalan` varchar(50) DEFAULT NULL,
  `penerima_id` int(11) NOT NULL COMMENT 'user yang terima barang',
  `kondisi_barang` enum('baik','rusak','kurang') DEFAULT 'baik',
  `keterangan` text DEFAULT NULL,
  `status` enum('diterima_koperasi','masuk_gudang') DEFAULT 'diterima_koperasi',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `penerimaan_detail`
--

CREATE TABLE `penerimaan_detail` (
  `id` int(11) NOT NULL,
  `penerimaan_id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `qty_terima` decimal(10,2) NOT NULL,
  `qty_ke_gudang` decimal(10,2) DEFAULT 0.00 COMMENT 'qty yang masuk gudang',
  `qty_distribusi` decimal(10,2) DEFAULT 0.00 COMMENT 'qty yang langsung distribusi',
  `kondisi` enum('baik','rusak') DEFAULT 'baik',
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `piutang`
--

CREATE TABLE `piutang` (
  `id` int(11) NOT NULL,
  `no_piutang` varchar(50) NOT NULL,
  `tanggal` date NOT NULL,
  `kantor_id` int(11) NOT NULL,
  `distribusi_id` int(11) DEFAULT NULL,
  `total_piutang` decimal(15,2) NOT NULL,
  `total_dibayar` decimal(15,2) DEFAULT 0.00,
  `sisa_piutang` decimal(15,2) GENERATED ALWAYS AS (`total_piutang` - `total_dibayar`) STORED,
  `jatuh_tempo` date DEFAULT NULL,
  `status` enum('belum_lunas','lunas') DEFAULT 'belum_lunas',
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `produk`
--

CREATE TABLE `produk` (
  `id` int(11) NOT NULL,
  `kode_produk` varchar(50) NOT NULL,
  `nama_produk` varchar(150) NOT NULL,
  `jenis_barang_id` int(11) NOT NULL COMMENT 'bahan baku/jadi/perlengkapan',
  `kategori_id` int(11) NOT NULL,
  `satuan_id` int(11) NOT NULL,
  `tipe_item` enum('stok','distribusi','khusus') NOT NULL COMMENT 'stok=disimpan, distribusi=langsung kirim, khusus=stok+distribusi',
  `status_produk` enum('persiapan','running','nonaktif') DEFAULT 'persiapan',
  `harga_estimasi` decimal(15,2) DEFAULT 0.00,
  `stok_minimum` int(11) DEFAULT 0,
  `masa_kadaluarsa_hari` int(11) DEFAULT NULL COMMENT 'untuk bahan baku yang ada expired',
  `spesifikasi` text DEFAULT NULL COMMENT 'spesifikasi teknis produk',
  `deskripsi` text DEFAULT NULL,
  `gambar` varchar(255) DEFAULT NULL,
  `barcode` varchar(100) DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `produk`
--

INSERT INTO `produk` (`id`, `kode_produk`, `nama_produk`, `jenis_barang_id`, `kategori_id`, `satuan_id`, `tipe_item`, `status_produk`, `harga_estimasi`, `stok_minimum`, `masa_kadaluarsa_hari`, `spesifikasi`, `deskripsi`, `gambar`, `barcode`, `created_at`, `updated_at`) VALUES
(1, 'PASAR-GUL-05a9', 'Gula Pasir lokal', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Gula Pasir lokal', NULL, NULL, '2025-12-29 06:30:26', NULL),
(2, 'PASAR-MIN-1c31', 'Minyak Goreng Curah', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Minyak Goreng Curah', NULL, NULL, '2025-12-29 06:30:26', NULL),
(3, 'PASAR-DAG-72dc', 'Daging Sapi Murni', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Daging Sapi Murni', NULL, NULL, '2025-12-29 06:30:26', NULL),
(4, 'PASAR-DAG-3bb6', 'Daging Ayam Broiler', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Daging Ayam Broiler', NULL, NULL, '2025-12-29 06:30:26', NULL),
(5, 'PASAR-DAG-632a', 'Daging Ayam Kampung', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Daging Ayam Kampung', NULL, NULL, '2025-12-29 06:30:26', NULL),
(6, 'PASAR-TEL-0c9d', 'Telur Ayam Broiler', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Telur Ayam Broiler', NULL, NULL, '2025-12-29 06:30:26', NULL),
(7, 'PASAR-SUS-7539', 'Susu Kental Manis Bendera Putih', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Susu Kental Manis Bendera Putih', NULL, NULL, '2025-12-29 06:30:26', NULL),
(8, 'PASAR-GAR-9545', 'Garam Beryodium', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Garam Beryodium', NULL, NULL, '2025-12-29 06:30:26', NULL),
(9, 'PASAR-IKA-0b7f', 'Ikan Kembung', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Ikan Kembung', NULL, NULL, '2025-12-29 06:30:26', NULL),
(10, 'PASAR-TEP-9a2b', 'Tepung Terigu Segi Tiga Biru', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Tepung Terigu Segi Tiga Biru', NULL, NULL, '2025-12-29 06:30:26', NULL),
(11, 'PASAR-CAB-ce68', 'Cabe Merah Keriting', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Cabe Merah Keriting', NULL, NULL, '2025-12-29 06:30:26', NULL),
(12, 'PASAR-CAB-d6de', 'Cabe Merah Biasa', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Cabe Merah Biasa', NULL, NULL, '2025-12-29 06:30:26', NULL),
(13, 'PASAR-CAB-5b8a', 'Cabe Rawit Merah', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Cabe Rawit Merah', NULL, NULL, '2025-12-29 06:30:26', NULL),
(14, 'PASAR-CAB-61cf', 'Cabe Rawit Hijau', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Cabe Rawit Hijau', NULL, NULL, '2025-12-29 06:30:26', NULL),
(15, 'PASAR-IND-4edf', 'Indomie Kari Ayam', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Indomie Kari Ayam', NULL, NULL, '2025-12-29 06:30:26', NULL),
(16, 'PASAR-GUL-c4b5', 'Gula Merah', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Gula Merah', NULL, NULL, '2025-12-29 06:30:26', NULL),
(17, 'PASAR-GUL-c7f0', 'Gula Batu', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Gula Batu', NULL, NULL, '2025-12-29 06:30:26', NULL),
(18, 'PASAR-MIN-d935', 'Minyak Goreng Tropical', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Minyak Goreng Tropical', NULL, NULL, '2025-12-29 06:30:26', NULL),
(19, 'PASAR-DAG-4738', 'Daging Kambing', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Daging Kambing', NULL, NULL, '2025-12-29 06:30:26', NULL),
(20, 'PASAR-MAR-b803', 'Margarine Blue Band', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Margarine Blue Band', NULL, NULL, '2025-12-29 06:30:26', NULL),
(21, 'PASAR-MAR-9072', 'Margarine Simas', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Margarine Simas', NULL, NULL, '2025-12-29 06:30:26', NULL),
(22, 'PASAR-SUS-1f70', 'Susu Kental Manis Bendera Cokelat', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Susu Kental Manis Bendera Cokelat', NULL, NULL, '2025-12-29 06:30:26', NULL),
(23, 'PASAR-GAS-91fa', 'Gas Elpiji', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Gas Elpiji', NULL, NULL, '2025-12-29 06:30:26', NULL),
(24, 'PASAR-IKA-4a60', 'Ikan Bandeng', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Ikan Bandeng', NULL, NULL, '2025-12-29 06:30:26', NULL),
(25, 'PASAR-KEN-a3f0', 'Kentang', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Kentang', NULL, NULL, '2025-12-29 06:30:26', NULL),
(26, 'PASAR-WOR-a6ae', 'Wortel', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Wortel', NULL, NULL, '2025-12-29 06:30:26', NULL),
(27, 'PASAR-BUN-6a9a', 'Buncis', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Buncis', NULL, NULL, '2025-12-29 06:30:26', NULL),
(28, 'PASAR-KOL-b1e0', 'Kol', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Kol', NULL, NULL, '2025-12-29 06:30:26', NULL),
(29, 'PASAR-SAW-5bfd', 'Sawi Hijau', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Sawi Hijau', NULL, NULL, '2025-12-29 06:30:26', NULL),
(30, 'PASAR-SAW-9a19', 'Sawi Petsay', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Sawi Petsay', NULL, NULL, '2025-12-29 06:30:26', NULL),
(31, 'PASAR-TOM-5995', 'Tomat Buah', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Tomat Buah', NULL, NULL, '2025-12-29 06:30:26', NULL),
(32, 'PASAR-TOM-7174', 'Tomat Sayur', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Tomat Sayur', NULL, NULL, '2025-12-29 06:30:26', NULL),
(33, 'PASAR-CAB-36b9', 'Cabe Hijau', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Cabe Hijau', NULL, NULL, '2025-12-29 06:30:26', NULL),
(34, 'PASAR-BAW-732c', 'Bawang Merah', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Bawang Merah', NULL, NULL, '2025-12-29 06:30:26', NULL),
(35, 'PASAR-BAW-b416', 'Bawang Putih', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Bawang Putih', NULL, NULL, '2025-12-29 06:30:26', NULL),
(36, 'PASAR-BAW-70ed', 'Bawang Bombay', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Bawang Bombay', NULL, NULL, '2025-12-29 06:30:26', NULL),
(37, 'PASAR-BAW-1c58', 'Bawang putih Katingan', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Bawang putih Katingan', NULL, NULL, '2025-12-29 06:30:26', NULL),
(38, 'PASAR-DAG-116a', 'Daging Sapi Kw 2', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Daging Sapi Kw 2', NULL, NULL, '2025-12-29 06:30:26', NULL),
(39, 'PASAR-IKA-463a', 'Ikan Tongkol', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Ikan Tongkol', NULL, NULL, '2025-12-29 06:30:26', NULL),
(40, 'PASAR-IKA-c4e2', 'Ikan Mas', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Ikan Mas', NULL, NULL, '2025-12-29 06:30:26', NULL),
(41, 'PASAR-KAC-1f40', 'Kacang Kedelai Impor', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Kacang Kedelai Impor', NULL, NULL, '2025-12-29 06:30:26', NULL),
(42, 'PASAR-BER-c194', 'Beras Medium', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Beras Medium', NULL, NULL, '2025-12-29 06:30:26', NULL),
(43, 'PASAR-BER-25e8', 'Beras Premium I', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Beras Premium I', NULL, NULL, '2025-12-29 06:30:26', NULL),
(44, 'PASAR-TEL-f6e2', 'Telur Ayam Kampung', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Telur Ayam Kampung', NULL, NULL, '2025-12-29 06:30:28', NULL),
(45, 'PASAR-SUS-97fd', 'Susu Bubuk Dancow Putih', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Susu Bubuk Dancow Putih', NULL, NULL, '2025-12-29 06:30:28', NULL),
(46, 'PASAR-KAC-428b', 'Kacang Hijau', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Kacang Hijau', NULL, NULL, '2025-12-29 06:30:28', NULL),
(47, 'PASAR-KAC-b3d3', 'Kacang Tanah/Suuk', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Kacang Tanah/Suuk', NULL, NULL, '2025-12-29 06:30:28', NULL),
(48, 'PASAR-UDA-16ca', 'Udang', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Udang', NULL, NULL, '2025-12-29 06:30:29', NULL),
(49, 'PASAR-KAC-94af', 'Kacang Kedelai Lokal', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Kacang Kedelai Lokal', NULL, NULL, '2025-12-29 06:30:29', NULL),
(50, 'PASAR-MIN-cb69', 'Minyak Goreng Kemasan Sederhana', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Minyak Goreng Kemasan Sederhana', NULL, NULL, '2025-12-29 06:30:29', NULL),
(51, 'PASAR-UBI-ebe7', 'Ubi Jalar', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Ubi Jalar', NULL, NULL, '2025-12-29 06:30:30', NULL),
(52, 'PASAR-SIN-2507', 'Singkong', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Singkong', NULL, NULL, '2025-12-29 06:30:30', NULL),
(53, 'PASAR-JAG-82b4', 'Jagung Pipilan', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Jagung Pipilan', NULL, NULL, '2025-12-29 06:30:30', NULL),
(54, 'PASAR-TEL-2b1a', 'Telur Bebek Mentah', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Telur Bebek Mentah', NULL, NULL, '2025-12-29 06:30:30', NULL),
(55, 'PASAR-TEL-dbac', 'Telur Bebek Asin', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Telur Bebek Asin', NULL, NULL, '2025-12-29 06:30:30', NULL),
(56, 'PASAR-BER-92d3', 'Beras Premium II', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Beras Premium II', NULL, NULL, '2025-12-29 06:30:30', NULL),
(57, 'PASAR-MIN-c7fb', 'Minyak Goreng Bimoli', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Minyak Goreng Bimoli', NULL, NULL, '2025-12-29 06:30:32', NULL),
(58, 'PASAR-SUS-cb06', 'Susu Kental Manis Indomilk', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Susu Kental Manis Indomilk', NULL, NULL, '2025-12-29 06:30:32', NULL),
(59, 'PASAR-TER-2b19', 'Teri Medan Kering', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Teri Medan Kering', NULL, NULL, '2025-12-29 06:30:32', NULL),
(60, 'PASAR-SUS-451f', 'Susu Kental Manis Indomilk Cokelat', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Susu Kental Manis Indomilk Cokelat', NULL, NULL, '2025-12-29 06:30:32', NULL),
(61, 'PASAR-IKA-2af8', 'Ikan Asin Tiga Wajan', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Ikan Asin Tiga Wajan', NULL, NULL, '2025-12-29 06:30:32', NULL),
(62, 'PASAR-BER-a97a', 'Beras Bulog', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Beras Bulog', NULL, NULL, '2025-12-29 06:30:32', NULL),
(63, 'PASAR-CUM-fe6a', 'Cumi Asin', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Cumi Asin', NULL, NULL, '2025-12-29 06:30:36', NULL),
(64, 'PASAR-BER-2ee2', 'Beras Premium Super', 1, 1, 4, 'stok', 'running', 0.00, 0, NULL, NULL, 'Komoditas pasar: Beras Premium Super', NULL, NULL, '2025-12-29 06:30:38', NULL);

-- --------------------------------------------------------

--
-- Struktur dari tabel `request`
--

CREATE TABLE `request` (
  `id` int(11) NOT NULL,
  `no_request` varchar(50) NOT NULL,
  `tanggal_request` date NOT NULL,
  `kantor_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL COMMENT 'user yang buat request',
  `keperluan` text DEFAULT NULL,
  `tanggal_butuh` date DEFAULT NULL,
  `status` enum('pending','diproses','selesai','ditolak') DEFAULT 'pending',
  `approved_by` int(11) DEFAULT NULL,
  `approved_at` datetime DEFAULT NULL,
  `keterangan_approval` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `request_detail`
--

CREATE TABLE `request_detail` (
  `id` int(11) NOT NULL,
  `request_id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `qty_request` decimal(10,2) NOT NULL,
  `qty_approved` decimal(10,2) DEFAULT NULL,
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `satuan`
--

CREATE TABLE `satuan` (
  `id` int(11) NOT NULL,
  `nama_satuan` varchar(50) NOT NULL,
  `keterangan` varchar(100) DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `satuan`
--

INSERT INTO `satuan` (`id`, `nama_satuan`, `keterangan`, `created_at`) VALUES
(1, 'PCS', 'Pieces/Buah', '2025-12-27 03:40:34'),
(2, 'BOX', 'Box/Kotak', '2025-12-27 03:40:34'),
(3, 'PACK', 'Pack/Bungkus', '2025-12-27 03:40:34'),
(4, 'KG', 'Kilogram', '2025-12-27 03:40:34'),
(5, 'LITER', 'Liter', '2025-12-27 03:40:34'),
(6, 'LUSIN', 'Lusin (12 pcs)', '2025-12-27 03:40:34'),
(7, 'GROSS', 'Gross (144 pcs)', '2025-12-27 03:40:34'),
(8, 'UNIT', 'Unit', '2025-12-27 03:40:34');

-- --------------------------------------------------------

--
-- Struktur dari tabel `scraping_log`
--

CREATE TABLE `scraping_log` (
  `id` int(11) NOT NULL,
  `bulan` int(2) NOT NULL,
  `tahun` int(4) NOT NULL,
  `jumlah_pasar` int(11) DEFAULT 0,
  `jumlah_komoditas` int(11) DEFAULT 0,
  `status` enum('success','partial','failed') DEFAULT 'success',
  `error_message` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `scraping_log`
--

INSERT INTO `scraping_log` (`id`, `bulan`, `tahun`, `jumlah_pasar`, `jumlah_komoditas`, `status`, `error_message`, `created_at`) VALUES
(1, 12, 2025, 7, 298, 'success', NULL, '2025-12-29 06:30:39');

-- --------------------------------------------------------

--
-- Struktur dari tabel `settings`
--

CREATE TABLE `settings` (
  `id` int(11) NOT NULL,
  `setting_key` varchar(100) NOT NULL,
  `setting_value` text DEFAULT NULL,
  `setting_group` varchar(50) DEFAULT NULL,
  `description` text DEFAULT NULL,
  `updated_at` timestamp NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `settings`
--

INSERT INTO `settings` (`id`, `setting_key`, `setting_value`, `setting_group`, `description`, `updated_at`) VALUES
(1, 'nama_perusahaan', 'MBG', 'general', 'Nama Perusahaan', '2025-12-27 03:40:34'),
(2, 'alamat_perusahaan', '', 'general', 'Alamat Perusahaan', '2025-12-27 03:40:34'),
(3, 'no_telp', '', 'general', 'No Telepon', '2025-12-27 03:40:34'),
(4, 'email', '', 'general', 'Email', '2025-12-27 03:40:34'),
(5, 'logo', '', 'general', 'Logo Perusahaan', '2025-12-27 03:40:34'),
(6, 'format_no_request', 'REQ/[TAHUN]/[BULAN]/[NOMOR]', 'format', 'Format Nomor Request', '2025-12-27 03:40:34'),
(7, 'format_no_pembelanjaan', 'BLJ/[TAHUN]/[BULAN]/[NOMOR]', 'format', 'Format Nomor Pembelanjaan', '2025-12-27 03:40:34'),
(8, 'format_no_penerimaan', 'TRM/[TAHUN]/[BULAN]/[NOMOR]', 'format', 'Format Nomor Penerimaan', '2025-12-27 03:40:34'),
(9, 'format_no_distribusi', 'DST/[TAHUN]/[BULAN]/[NOMOR]', 'format', 'Format Nomor Distribusi', '2025-12-27 03:40:34'),
(10, 'format_no_piutang', 'HTG/[TAHUN]/[BULAN]/[NOMOR]', 'format', 'Format Nomor Piutang', '2025-12-27 03:40:34'),
(11, 'format_no_opname', 'OPN/[TAHUN]/[BULAN]/[NOMOR]', 'format', 'Format Nomor Opname', '2025-12-27 03:40:34'),
(12, 'qr_code_url', 'https://yourdomain.com/scan/', 'qr', 'Base URL untuk QR Code', '2025-12-27 03:40:34'),
(13, 'enable_gps_tracking', '1', 'qr', 'Aktifkan GPS Tracking saat scan QR (1=ya, 0=tidak)', '2025-12-27 03:40:34'),
(14, 'format_no_menu', 'MENU/[TAHUN]/[BULAN]/[NOMOR]', 'format', 'Format Nomor Menu Harian', '2025-12-29 07:07:20');

-- --------------------------------------------------------

--
-- Struktur dari tabel `stok_opname`
--

CREATE TABLE `stok_opname` (
  `id` int(11) NOT NULL,
  `no_opname` varchar(50) NOT NULL,
  `tanggal_opname` date NOT NULL,
  `periode` varchar(20) DEFAULT NULL COMMENT 'misal: 2024-01',
  `lokasi` enum('gudang','koperasi') NOT NULL,
  `pic_id` int(11) NOT NULL COMMENT 'penanggung jawab opname',
  `status` enum('draft','proses','selesai') DEFAULT 'draft',
  `keterangan` text DEFAULT NULL,
  `approved_by` int(11) DEFAULT NULL,
  `approved_at` datetime DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `stok_opname_detail`
--

CREATE TABLE `stok_opname_detail` (
  `id` int(11) NOT NULL,
  `opname_id` int(11) NOT NULL,
  `produk_id` int(11) NOT NULL,
  `qty_sistem` decimal(10,2) NOT NULL COMMENT 'stok di sistem',
  `qty_fisik` decimal(10,2) NOT NULL COMMENT 'hasil hitung fisik',
  `selisih` decimal(10,2) GENERATED ALWAYS AS (`qty_fisik` - `qty_sistem`) STORED,
  `keterangan` text DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `supplier`
--

CREATE TABLE `supplier` (
  `id` int(11) NOT NULL,
  `kode_supplier` varchar(20) NOT NULL,
  `nama_supplier` varchar(150) NOT NULL,
  `alamat` text DEFAULT NULL,
  `no_telp` varchar(20) DEFAULT NULL,
  `email` varchar(100) DEFAULT NULL,
  `pic_name` varchar(100) DEFAULT NULL,
  `pic_phone` varchar(20) DEFAULT NULL,
  `keterangan` text DEFAULT NULL,
  `status` enum('aktif','nonaktif') DEFAULT 'aktif',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Struktur dari tabel `users`
--

CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `username` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `nama_lengkap` varchar(100) NOT NULL,
  `email` varchar(100) DEFAULT NULL,
  `no_hp` varchar(20) DEFAULT NULL,
  `role` enum('admin','koperasi','gudang','kantor') NOT NULL,
  `kantor_id` int(11) DEFAULT NULL,
  `foto` varchar(255) DEFAULT NULL,
  `status` enum('aktif','nonaktif') DEFAULT 'aktif',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NULL DEFAULT NULL ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data untuk tabel `users`
--

INSERT INTO `users` (`id`, `username`, `password`, `nama_lengkap`, `email`, `no_hp`, `role`, `kantor_id`, `foto`, `status`, `created_at`, `updated_at`) VALUES
(1, 'admin', '$2y$10$SJqPFje7TMHOxFKwL/OpqeV9ueldyEdqhtzbKm6tjucv7xEPS3F1m', 'Administrator', 'admin@mbg.com', NULL, 'admin', NULL, NULL, 'aktif', '2025-12-27 03:40:34', '2025-12-27 03:52:23'),
(2, 'koperasi', '044a2fc30eacfb63d14ed32669f66f94', 'Staff Koperasi', 'koperasi@mbg.com', NULL, 'koperasi', NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL),
(3, 'gudang', 'cbb7449d78314665f9e7c7dd0a18a68a', 'Staff Gudang', 'gudang@mbg.com', NULL, 'gudang', NULL, NULL, 'aktif', '2025-12-27 03:40:34', NULL);

-- --------------------------------------------------------

--
-- Stand-in struktur untuk tampilan `v_analisis_harga_pasar`
-- (Lihat di bawah untuk tampilan aktual)
--
CREATE TABLE `v_analisis_harga_pasar` (
`id` int(11)
,`kode_produk` varchar(50)
,`nama_produk` varchar(150)
,`nama_pasar` varchar(100)
,`periode` varchar(14)
,`harga_terendah` decimal(15,2)
,`harga_tertinggi` decimal(15,2)
,`harga_rata_rata` decimal(15,2)
,`jumlah_hari_terdata` int(3)
,`selisih_harga` decimal(16,2)
,`volatilitas_percent` decimal(22,2)
,`nama_satuan` varchar(50)
,`scraped_at` datetime
,`created_at` timestamp
);

-- --------------------------------------------------------

--
-- Stand-in struktur untuk tampilan `v_comparison_request_delivery`
-- (Lihat di bawah untuk tampilan aktual)
--
CREATE TABLE `v_comparison_request_delivery` (
`distribusi_id` int(11)
,`no_surat_jalan` varchar(50)
,`tanggal_kirim` date
,`tanggal_terima` datetime
,`status` enum('dikirim','diterima','bermasalah')
,`kode_kantor` varchar(20)
,`nama_kantor` varchar(100)
,`no_request` varchar(50)
,`jenis_barang` varchar(100)
,`nama_kategori` varchar(100)
,`kode_produk` varchar(50)
,`nama_produk` varchar(150)
,`nama_satuan` varchar(50)
,`qty_diminta` decimal(10,2)
,`qty_dikirim` decimal(10,2)
,`qty_diterima` decimal(10,2)
,`selisih` decimal(10,2)
,`kondisi_terima` enum('lengkap','kurang','rusak','lebih')
,`alasan_selisih` text
,`status_penerimaan` varchar(14)
);

-- --------------------------------------------------------

--
-- Stand-in struktur untuk tampilan `v_menu_purchase_recommendation`
-- (Lihat di bawah untuk tampilan aktual)
--
CREATE TABLE `v_menu_purchase_recommendation` (
`menu_id` int(11)
,`no_menu` varchar(50)
,`tanggal_menu` date
,`nama_menu` varchar(200)
,`detail_id` int(11)
,`produk_id` int(11)
,`kode_produk` varchar(50)
,`nama_produk` varchar(150)
,`nama_satuan` varchar(50)
,`qty_to_purchase` decimal(10,2)
,`market_recommendation` text
,`recommended_market` varchar(100)
,`recommended_price` decimal(15,2)
,`estimated_cost` decimal(25,4)
,`bulan` int(2)
,`tahun` int(4)
,`price_updated_at` datetime
);

-- --------------------------------------------------------

--
-- Stand-in struktur untuk tampilan `v_menu_stock_check`
-- (Lihat di bawah untuk tampilan aktual)
--
CREATE TABLE `v_menu_stock_check` (
`menu_id` int(11)
,`no_menu` varchar(50)
,`tanggal_menu` date
,`nama_menu` varchar(200)
,`menu_status` enum('draft','approved','processing','completed','cancelled')
,`detail_id` int(11)
,`produk_id` int(11)
,`kode_produk` varchar(50)
,`nama_produk` varchar(150)
,`nama_satuan` varchar(50)
,`qty_needed` decimal(10,2)
,`warehouse_stock` decimal(32,2)
,`qty_from_warehouse` decimal(10,2)
,`qty_to_purchase` decimal(10,2)
,`stock_status` varchar(12)
,`warehouse_reserved` tinyint(1)
,`purchase_status` enum('pending','purchased','received')
,`distribution_status` enum('pending','distributed','completed')
);

-- --------------------------------------------------------

--
-- Stand-in struktur untuk tampilan `v_menu_summary`
-- (Lihat di bawah untuk tampilan aktual)
--
CREATE TABLE `v_menu_summary` (
`id` int(11)
,`no_menu` varchar(50)
,`tanggal_menu` date
,`nama_menu` varchar(200)
,`total_porsi` int(11)
,`nama_kantor` varchar(100)
,`status` enum('draft','approved','processing','completed','cancelled')
,`created_by_name` varchar(100)
,`approved_by_name` varchar(100)
,`total_items` bigint(21)
,`items_to_purchase` decimal(22,0)
,`items_from_warehouse` decimal(22,0)
,`items_purchased` decimal(22,0)
,`items_distributed` decimal(22,0)
,`created_at` timestamp
,`approved_at` datetime
);

-- --------------------------------------------------------

--
-- Stand-in struktur untuk tampilan `v_rekomendasi_pembelian`
-- (Lihat di bawah untuk tampilan aktual)
--
CREATE TABLE `v_rekomendasi_pembelian` (
`nama_produk` varchar(150)
,`kode_produk` varchar(50)
,`nama_satuan` varchar(50)
,`nama_pasar` varchar(100)
,`harga_pasar` decimal(15,2)
,`harga_sistem` decimal(15,2)
,`status_harga` varchar(13)
,`selisih_percent` decimal(22,2)
,`periode_harga` varchar(14)
,`update_terakhir` datetime
);

-- --------------------------------------------------------

--
-- Stand-in struktur untuk tampilan `v_stok_by_jenis`
-- (Lihat di bawah untuk tampilan aktual)
--
CREATE TABLE `v_stok_by_jenis` (
`kode_jenis` varchar(20)
,`nama_jenis` varchar(100)
,`nama_kategori` varchar(100)
,`kode_produk` varchar(50)
,`nama_produk` varchar(150)
,`nama_satuan` varchar(50)
,`batch_number` varchar(50)
,`tanggal_expired` date
,`qty_stok` decimal(10,2)
,`qty_reserved` decimal(10,2)
,`qty_available` decimal(10,2)
,`lokasi_rak` varchar(50)
,`kondisi` enum('baik','rusak','expired','quarantine')
,`status_stok` varchar(12)
);

-- --------------------------------------------------------

--
-- Struktur untuk view `v_analisis_harga_pasar`
--
DROP TABLE IF EXISTS `v_analisis_harga_pasar`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_analisis_harga_pasar`  AS SELECT `hp`.`id` AS `id`, `p`.`kode_produk` AS `kode_produk`, `p`.`nama_produk` AS `nama_produk`, `hp`.`nama_pasar` AS `nama_pasar`, concat(lpad(`hp`.`bulan`,2,'0'),'-',`hp`.`tahun`) AS `periode`, `hp`.`harga_terendah` AS `harga_terendah`, `hp`.`harga_tertinggi` AS `harga_tertinggi`, `hp`.`harga_rata_rata` AS `harga_rata_rata`, `hp`.`jumlah_hari_terdata` AS `jumlah_hari_terdata`, `hp`.`harga_tertinggi`- `hp`.`harga_terendah` AS `selisih_harga`, round((`hp`.`harga_tertinggi` - `hp`.`harga_terendah`) / `hp`.`harga_terendah` * 100,2) AS `volatilitas_percent`, `s`.`nama_satuan` AS `nama_satuan`, `hp`.`scraped_at` AS `scraped_at`, `hp`.`created_at` AS `created_at` FROM ((`harga_pasar` `hp` join `produk` `p` on(`hp`.`produk_id` = `p`.`id`)) join `satuan` `s` on(`p`.`satuan_id` = `s`.`id`)) ORDER BY `hp`.`tahun` DESC, `hp`.`bulan` DESC, `p`.`nama_produk` ASC, `hp`.`nama_pasar` ASC ;

-- --------------------------------------------------------

--
-- Struktur untuk view `v_comparison_request_delivery`
--
DROP TABLE IF EXISTS `v_comparison_request_delivery`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_comparison_request_delivery`  AS SELECT `d`.`id` AS `distribusi_id`, `d`.`no_surat_jalan` AS `no_surat_jalan`, `d`.`tanggal_kirim` AS `tanggal_kirim`, `d`.`tanggal_terima` AS `tanggal_terima`, `d`.`status` AS `status`, `k`.`kode_kantor` AS `kode_kantor`, `k`.`nama_kantor` AS `nama_kantor`, `r`.`no_request` AS `no_request`, `jb`.`nama_jenis` AS `jenis_barang`, `kt`.`nama_kategori` AS `nama_kategori`, `p`.`kode_produk` AS `kode_produk`, `p`.`nama_produk` AS `nama_produk`, `s`.`nama_satuan` AS `nama_satuan`, `rd`.`qty_request` AS `qty_diminta`, `dd`.`qty_kirim` AS `qty_dikirim`, `dd`.`qty_terima` AS `qty_diterima`, `dd`.`selisih` AS `selisih`, `dd`.`kondisi_terima` AS `kondisi_terima`, `dd`.`alasan_selisih` AS `alasan_selisih`, CASE WHEN `dd`.`qty_terima` is null THEN 'Belum Diterima' WHEN `dd`.`selisih` = 0 THEN 'Sesuai' WHEN `dd`.`selisih` > 0 THEN 'Lebih' WHEN `dd`.`selisih` < 0 THEN 'Kurang' END AS `status_penerimaan` FROM ((((((((`distribusi` `d` left join `kantor` `k` on(`d`.`kantor_id` = `k`.`id`)) left join `request` `r` on(`d`.`request_id` = `r`.`id`)) join `distribusi_detail` `dd` on(`d`.`id` = `dd`.`distribusi_id`)) join `produk` `p` on(`dd`.`produk_id` = `p`.`id`)) join `jenis_barang` `jb` on(`p`.`jenis_barang_id` = `jb`.`id`)) join `kategori` `kt` on(`p`.`kategori_id` = `kt`.`id`)) join `satuan` `s` on(`p`.`satuan_id` = `s`.`id`)) left join `request_detail` `rd` on(`r`.`id` = `rd`.`request_id` and `dd`.`produk_id` = `rd`.`produk_id`)) ORDER BY `d`.`tanggal_kirim` DESC, `d`.`no_surat_jalan` ASC, `p`.`nama_produk` ASC ;

-- --------------------------------------------------------

--
-- Struktur untuk view `v_menu_purchase_recommendation`
--
DROP TABLE IF EXISTS `v_menu_purchase_recommendation`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_menu_purchase_recommendation`  AS SELECT `mh`.`id` AS `menu_id`, `mh`.`no_menu` AS `no_menu`, `mh`.`tanggal_menu` AS `tanggal_menu`, `mh`.`nama_menu` AS `nama_menu`, `mhd`.`id` AS `detail_id`, `p`.`id` AS `produk_id`, `p`.`kode_produk` AS `kode_produk`, `p`.`nama_produk` AS `nama_produk`, `s`.`nama_satuan` AS `nama_satuan`, `mhd`.`qty_to_purchase` AS `qty_to_purchase`, `mhd`.`market_recommendation` AS `market_recommendation`, `hp`.`nama_pasar` AS `recommended_market`, `hp`.`harga_terendah` AS `recommended_price`, `mhd`.`qty_to_purchase`* `hp`.`harga_terendah` AS `estimated_cost`, `hp`.`bulan` AS `bulan`, `hp`.`tahun` AS `tahun`, `hp`.`scraped_at` AS `price_updated_at` FROM ((((`menu_harian` `mh` join `menu_harian_detail` `mhd` on(`mh`.`id` = `mhd`.`menu_id`)) join `produk` `p` on(`mhd`.`produk_id` = `p`.`id`)) join `satuan` `s` on(`p`.`satuan_id` = `s`.`id`)) left join `harga_pasar` `hp` on(`p`.`id` = `hp`.`produk_id` and `hp`.`bulan` = month(`mh`.`tanggal_menu`) and `hp`.`tahun` = year(`mh`.`tanggal_menu`) and `hp`.`harga_terendah` = (select min(`hp2`.`harga_terendah`) from `harga_pasar` `hp2` where `hp2`.`produk_id` = `p`.`id` and `hp2`.`bulan` = month(`mh`.`tanggal_menu`) and `hp2`.`tahun` = year(`mh`.`tanggal_menu`)))) WHERE `mhd`.`qty_to_purchase` > 0 ORDER BY `mh`.`tanggal_menu` DESC, `mhd`.`qty_to_purchase`* `hp`.`harga_terendah` DESC ;

-- --------------------------------------------------------

--
-- Struktur untuk view `v_menu_stock_check`
--
DROP TABLE IF EXISTS `v_menu_stock_check`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_menu_stock_check`  AS SELECT `mh`.`id` AS `menu_id`, `mh`.`no_menu` AS `no_menu`, `mh`.`tanggal_menu` AS `tanggal_menu`, `mh`.`nama_menu` AS `nama_menu`, `mh`.`status` AS `menu_status`, `mhd`.`id` AS `detail_id`, `p`.`id` AS `produk_id`, `p`.`kode_produk` AS `kode_produk`, `p`.`nama_produk` AS `nama_produk`, `s`.`nama_satuan` AS `nama_satuan`, `mhd`.`qty_needed` AS `qty_needed`, coalesce(sum(`gs`.`qty_available`),0) AS `warehouse_stock`, `mhd`.`qty_from_warehouse` AS `qty_from_warehouse`, `mhd`.`qty_to_purchase` AS `qty_to_purchase`, CASE WHEN coalesce(sum(`gs`.`qty_available`),0) >= `mhd`.`qty_needed` THEN 'sufficient' WHEN coalesce(sum(`gs`.`qty_available`),0) > 0 THEN 'partial' ELSE 'insufficient' END AS `stock_status`, `mhd`.`warehouse_reserved` AS `warehouse_reserved`, `mhd`.`purchase_status` AS `purchase_status`, `mhd`.`distribution_status` AS `distribution_status` FROM ((((`menu_harian` `mh` join `menu_harian_detail` `mhd` on(`mh`.`id` = `mhd`.`menu_id`)) join `produk` `p` on(`mhd`.`produk_id` = `p`.`id`)) join `satuan` `s` on(`p`.`satuan_id` = `s`.`id`)) left join `gudang_stok` `gs` on(`p`.`id` = `gs`.`produk_id` and `gs`.`kondisi` = 'baik')) GROUP BY `mh`.`id`, `mhd`.`id`, `p`.`id`, `s`.`id` ORDER BY `mh`.`tanggal_menu` DESC, `p`.`nama_produk` ASC ;

-- --------------------------------------------------------

--
-- Struktur untuk view `v_menu_summary`
--
DROP TABLE IF EXISTS `v_menu_summary`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_menu_summary`  AS SELECT `mh`.`id` AS `id`, `mh`.`no_menu` AS `no_menu`, `mh`.`tanggal_menu` AS `tanggal_menu`, `mh`.`nama_menu` AS `nama_menu`, `mh`.`total_porsi` AS `total_porsi`, `k`.`nama_kantor` AS `nama_kantor`, `mh`.`status` AS `status`, `u1`.`nama_lengkap` AS `created_by_name`, `u2`.`nama_lengkap` AS `approved_by_name`, count(`mhd`.`id`) AS `total_items`, sum(case when `mhd`.`qty_to_purchase` > 0 then 1 else 0 end) AS `items_to_purchase`, sum(case when `mhd`.`warehouse_reserved` = 1 then 1 else 0 end) AS `items_from_warehouse`, sum(case when `mhd`.`purchase_status` = 'purchased' then 1 else 0 end) AS `items_purchased`, sum(case when `mhd`.`distribution_status` = 'completed' then 1 else 0 end) AS `items_distributed`, `mh`.`created_at` AS `created_at`, `mh`.`approved_at` AS `approved_at` FROM ((((`menu_harian` `mh` left join `kantor` `k` on(`mh`.`kantor_id` = `k`.`id`)) left join `users` `u1` on(`mh`.`created_by` = `u1`.`id`)) left join `users` `u2` on(`mh`.`approved_by` = `u2`.`id`)) left join `menu_harian_detail` `mhd` on(`mh`.`id` = `mhd`.`menu_id`)) GROUP BY `mh`.`id` ORDER BY `mh`.`tanggal_menu` DESC ;

-- --------------------------------------------------------

--
-- Struktur untuk view `v_rekomendasi_pembelian`
--
DROP TABLE IF EXISTS `v_rekomendasi_pembelian`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_rekomendasi_pembelian`  AS SELECT `p`.`nama_produk` AS `nama_produk`, `p`.`kode_produk` AS `kode_produk`, `s`.`nama_satuan` AS `nama_satuan`, `hp`.`nama_pasar` AS `nama_pasar`, `hp`.`harga_terendah` AS `harga_pasar`, `p`.`harga_estimasi` AS `harga_sistem`, CASE WHEN `hp`.`harga_terendah` < `p`.`harga_estimasi` * 0.9 THEN 'DIBAWAH_HARGA' WHEN `hp`.`harga_terendah` > `p`.`harga_estimasi` * 1.1 THEN 'DIATAS_HARGA' ELSE 'NORMAL' END AS `status_harga`, round(abs(`hp`.`harga_terendah` - `p`.`harga_estimasi`) / `p`.`harga_estimasi` * 100,2) AS `selisih_percent`, concat(lpad(`hp`.`bulan`,2,'0'),'-',`hp`.`tahun`) AS `periode_harga`, `hp`.`scraped_at` AS `update_terakhir` FROM ((`harga_pasar` `hp` join `produk` `p` on(`hp`.`produk_id` = `p`.`id`)) join `satuan` `s` on(`p`.`satuan_id` = `s`.`id`)) ORDER BY CASE WHEN `hp`.`harga_terendah` < `p`.`harga_estimasi` * 0.9 THEN 'DIBAWAH_HARGA' WHEN `hp`.`harga_terendah` > `p`.`harga_estimasi` * 1.1 THEN 'DIATAS_HARGA' ELSE 'NORMAL' END ASC, round(abs(`hp`.`harga_terendah` - `p`.`harga_estimasi`) / `p`.`harga_estimasi` * 100,2) DESC ;

-- --------------------------------------------------------

--
-- Struktur untuk view `v_stok_by_jenis`
--
DROP TABLE IF EXISTS `v_stok_by_jenis`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_stok_by_jenis`  AS SELECT `jb`.`kode_jenis` AS `kode_jenis`, `jb`.`nama_jenis` AS `nama_jenis`, `kt`.`nama_kategori` AS `nama_kategori`, `p`.`kode_produk` AS `kode_produk`, `p`.`nama_produk` AS `nama_produk`, `s`.`nama_satuan` AS `nama_satuan`, `gs`.`batch_number` AS `batch_number`, `gs`.`tanggal_expired` AS `tanggal_expired`, `gs`.`qty_stok` AS `qty_stok`, `gs`.`qty_reserved` AS `qty_reserved`, `gs`.`qty_available` AS `qty_available`, `gs`.`lokasi_rak` AS `lokasi_rak`, `gs`.`kondisi` AS `kondisi`, CASE WHEN `gs`.`tanggal_expired` is not null AND `gs`.`tanggal_expired` <= curdate() THEN 'EXPIRED' WHEN `gs`.`tanggal_expired` is not null AND `gs`.`tanggal_expired` <= curdate() + interval 30 day THEN 'AKAN EXPIRED' WHEN `gs`.`qty_available` <= `p`.`stok_minimum` THEN 'STOK MENIPIS' WHEN `gs`.`kondisi` = 'rusak' THEN 'RUSAK' ELSE 'NORMAL' END AS `status_stok` FROM ((((`gudang_stok` `gs` join `produk` `p` on(`gs`.`produk_id` = `p`.`id`)) join `jenis_barang` `jb` on(`p`.`jenis_barang_id` = `jb`.`id`)) join `kategori` `kt` on(`p`.`kategori_id` = `kt`.`id`)) join `satuan` `s` on(`p`.`satuan_id` = `s`.`id`)) ORDER BY `jb`.`nama_jenis` ASC, `kt`.`nama_kategori` ASC, `p`.`nama_produk` ASC ;

--
-- Indexes for dumped tables
--

--
-- Indeks untuk tabel `distribusi`
--
ALTER TABLE `distribusi`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `no_surat_jalan` (`no_surat_jalan`),
  ADD UNIQUE KEY `qr_code` (`qr_code`),
  ADD KEY `request_id` (`request_id`),
  ADD KEY `kantor_id` (`kantor_id`),
  ADD KEY `pengirim_id` (`pengirim_id`),
  ADD KEY `penerima_user_id` (`penerima_user_id`);

--
-- Indeks untuk tabel `distribusi_detail`
--
ALTER TABLE `distribusi_detail`
  ADD PRIMARY KEY (`id`),
  ADD KEY `distribusi_id` (`distribusi_id`),
  ADD KEY `produk_id` (`produk_id`);

--
-- Indeks untuk tabel `gudang_stok`
--
ALTER TABLE `gudang_stok`
  ADD PRIMARY KEY (`id`),
  ADD KEY `produk_id` (`produk_id`),
  ADD KEY `batch_number` (`batch_number`),
  ADD KEY `tanggal_expired` (`tanggal_expired`);

--
-- Indeks untuk tabel `harga_pasar`
--
ALTER TABLE `harga_pasar`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `unique_pasar_produk_periode` (`produk_id`,`pasar_id`,`bulan`,`tahun`),
  ADD KEY `produk_id` (`produk_id`),
  ADD KEY `pasar_id` (`pasar_id`),
  ADD KEY `periode` (`tahun`,`bulan`);

--
-- Indeks untuk tabel `jenis_barang`
--
ALTER TABLE `jenis_barang`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `kode_jenis` (`kode_jenis`);

--
-- Indeks untuk tabel `kantor`
--
ALTER TABLE `kantor`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `kode_kantor` (`kode_kantor`);

--
-- Indeks untuk tabel `kartu_stok`
--
ALTER TABLE `kartu_stok`
  ADD PRIMARY KEY (`id`),
  ADD KEY `produk_id` (`produk_id`),
  ADD KEY `user_id` (`user_id`);

--
-- Indeks untuk tabel `kategori`
--
ALTER TABLE `kategori`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `kode_kategori` (`kode_kategori`),
  ADD KEY `jenis_barang_id` (`jenis_barang_id`),
  ADD KEY `parent_id` (`parent_id`);

--
-- Indeks untuk tabel `log_activity`
--
ALTER TABLE `log_activity`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`);

--
-- Indeks untuk tabel `log_scan_qr`
--
ALTER TABLE `log_scan_qr`
  ADD PRIMARY KEY (`id`),
  ADD KEY `qr_code` (`qr_code`),
  ADD KEY `distribusi_id` (`distribusi_id`),
  ADD KEY `user_id` (`user_id`);

--
-- Indeks untuk tabel `menu_harian`
--
ALTER TABLE `menu_harian`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `no_menu` (`no_menu`),
  ADD KEY `tanggal_menu` (`tanggal_menu`),
  ADD KEY `status` (`status`),
  ADD KEY `kantor_id` (`kantor_id`),
  ADD KEY `created_by` (`created_by`),
  ADD KEY `approved_by` (`approved_by`);

--
-- Indeks untuk tabel `menu_harian_detail`
--
ALTER TABLE `menu_harian_detail`
  ADD PRIMARY KEY (`id`),
  ADD KEY `menu_id` (`menu_id`),
  ADD KEY `produk_id` (`produk_id`),
  ADD KEY `pembelanjaan_id` (`pembelanjaan_id`);

--
-- Indeks untuk tabel `pembayaran_piutang`
--
ALTER TABLE `pembayaran_piutang`
  ADD PRIMARY KEY (`id`),
  ADD KEY `piutang_id` (`piutang_id`),
  ADD KEY `user_id` (`user_id`);

--
-- Indeks untuk tabel `pembelanjaan`
--
ALTER TABLE `pembelanjaan`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `no_pembelanjaan` (`no_pembelanjaan`),
  ADD KEY `supplier_id` (`supplier_id`),
  ADD KEY `request_id` (`request_id`),
  ADD KEY `user_id` (`user_id`);

--
-- Indeks untuk tabel `pembelanjaan_detail`
--
ALTER TABLE `pembelanjaan_detail`
  ADD PRIMARY KEY (`id`),
  ADD KEY `pembelanjaan_id` (`pembelanjaan_id`),
  ADD KEY `produk_id` (`produk_id`);

--
-- Indeks untuk tabel `penerimaan_barang`
--
ALTER TABLE `penerimaan_barang`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `no_penerimaan` (`no_penerimaan`),
  ADD KEY `pembelanjaan_id` (`pembelanjaan_id`),
  ADD KEY `supplier_id` (`supplier_id`),
  ADD KEY `penerima_id` (`penerima_id`);

--
-- Indeks untuk tabel `penerimaan_detail`
--
ALTER TABLE `penerimaan_detail`
  ADD PRIMARY KEY (`id`),
  ADD KEY `penerimaan_id` (`penerimaan_id`),
  ADD KEY `produk_id` (`produk_id`);

--
-- Indeks untuk tabel `piutang`
--
ALTER TABLE `piutang`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `no_piutang` (`no_piutang`),
  ADD KEY `kantor_id` (`kantor_id`),
  ADD KEY `distribusi_id` (`distribusi_id`);

--
-- Indeks untuk tabel `produk`
--
ALTER TABLE `produk`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `kode_produk` (`kode_produk`),
  ADD KEY `jenis_barang_id` (`jenis_barang_id`),
  ADD KEY `kategori_id` (`kategori_id`),
  ADD KEY `satuan_id` (`satuan_id`);

--
-- Indeks untuk tabel `request`
--
ALTER TABLE `request`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `no_request` (`no_request`),
  ADD KEY `kantor_id` (`kantor_id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `approved_by` (`approved_by`);

--
-- Indeks untuk tabel `request_detail`
--
ALTER TABLE `request_detail`
  ADD PRIMARY KEY (`id`),
  ADD KEY `request_id` (`request_id`),
  ADD KEY `produk_id` (`produk_id`);

--
-- Indeks untuk tabel `satuan`
--
ALTER TABLE `satuan`
  ADD PRIMARY KEY (`id`);

--
-- Indeks untuk tabel `scraping_log`
--
ALTER TABLE `scraping_log`
  ADD PRIMARY KEY (`id`),
  ADD KEY `periode` (`tahun`,`bulan`);

--
-- Indeks untuk tabel `settings`
--
ALTER TABLE `settings`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `setting_key` (`setting_key`);

--
-- Indeks untuk tabel `stok_opname`
--
ALTER TABLE `stok_opname`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `no_opname` (`no_opname`),
  ADD KEY `pic_id` (`pic_id`),
  ADD KEY `approved_by` (`approved_by`);

--
-- Indeks untuk tabel `stok_opname_detail`
--
ALTER TABLE `stok_opname_detail`
  ADD PRIMARY KEY (`id`),
  ADD KEY `opname_id` (`opname_id`),
  ADD KEY `produk_id` (`produk_id`);

--
-- Indeks untuk tabel `supplier`
--
ALTER TABLE `supplier`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `kode_supplier` (`kode_supplier`);

--
-- Indeks untuk tabel `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `username` (`username`);

--
-- AUTO_INCREMENT untuk tabel yang dibuang
--

--
-- AUTO_INCREMENT untuk tabel `distribusi`
--
ALTER TABLE `distribusi`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `distribusi_detail`
--
ALTER TABLE `distribusi_detail`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `gudang_stok`
--
ALTER TABLE `gudang_stok`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `harga_pasar`
--
ALTER TABLE `harga_pasar`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=299;

--
-- AUTO_INCREMENT untuk tabel `jenis_barang`
--
ALTER TABLE `jenis_barang`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT untuk tabel `kantor`
--
ALTER TABLE `kantor`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT untuk tabel `kartu_stok`
--
ALTER TABLE `kartu_stok`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `kategori`
--
ALTER TABLE `kategori`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT untuk tabel `log_activity`
--
ALTER TABLE `log_activity`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=10;

--
-- AUTO_INCREMENT untuk tabel `log_scan_qr`
--
ALTER TABLE `log_scan_qr`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `menu_harian`
--
ALTER TABLE `menu_harian`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT untuk tabel `menu_harian_detail`
--
ALTER TABLE `menu_harian_detail`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT untuk tabel `pembayaran_piutang`
--
ALTER TABLE `pembayaran_piutang`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `pembelanjaan`
--
ALTER TABLE `pembelanjaan`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `pembelanjaan_detail`
--
ALTER TABLE `pembelanjaan_detail`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `penerimaan_barang`
--
ALTER TABLE `penerimaan_barang`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `penerimaan_detail`
--
ALTER TABLE `penerimaan_detail`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `piutang`
--
ALTER TABLE `piutang`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `produk`
--
ALTER TABLE `produk`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=65;

--
-- AUTO_INCREMENT untuk tabel `request`
--
ALTER TABLE `request`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `request_detail`
--
ALTER TABLE `request_detail`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `satuan`
--
ALTER TABLE `satuan`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT untuk tabel `scraping_log`
--
ALTER TABLE `scraping_log`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT untuk tabel `settings`
--
ALTER TABLE `settings`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=15;

--
-- AUTO_INCREMENT untuk tabel `stok_opname`
--
ALTER TABLE `stok_opname`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `stok_opname_detail`
--
ALTER TABLE `stok_opname_detail`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `supplier`
--
ALTER TABLE `supplier`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT untuk tabel `users`
--
ALTER TABLE `users`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- Ketidakleluasaan untuk tabel pelimpahan (Dumped Tables)
--

--
-- Ketidakleluasaan untuk tabel `distribusi`
--
ALTER TABLE `distribusi`
  ADD CONSTRAINT `distribusi_ibfk_1` FOREIGN KEY (`request_id`) REFERENCES `request` (`id`),
  ADD CONSTRAINT `distribusi_ibfk_2` FOREIGN KEY (`kantor_id`) REFERENCES `kantor` (`id`),
  ADD CONSTRAINT `distribusi_ibfk_3` FOREIGN KEY (`pengirim_id`) REFERENCES `users` (`id`),
  ADD CONSTRAINT `distribusi_ibfk_4` FOREIGN KEY (`penerima_user_id`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `distribusi_detail`
--
ALTER TABLE `distribusi_detail`
  ADD CONSTRAINT `distribusi_detail_ibfk_1` FOREIGN KEY (`distribusi_id`) REFERENCES `distribusi` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `distribusi_detail_ibfk_2` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`);

--
-- Ketidakleluasaan untuk tabel `gudang_stok`
--
ALTER TABLE `gudang_stok`
  ADD CONSTRAINT `gudang_stok_ibfk_1` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`);

--
-- Ketidakleluasaan untuk tabel `harga_pasar`
--
ALTER TABLE `harga_pasar`
  ADD CONSTRAINT `harga_pasar_ibfk_1` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`) ON DELETE CASCADE;

--
-- Ketidakleluasaan untuk tabel `kartu_stok`
--
ALTER TABLE `kartu_stok`
  ADD CONSTRAINT `kartu_stok_ibfk_1` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`),
  ADD CONSTRAINT `kartu_stok_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `kategori`
--
ALTER TABLE `kategori`
  ADD CONSTRAINT `kategori_ibfk_1` FOREIGN KEY (`jenis_barang_id`) REFERENCES `jenis_barang` (`id`),
  ADD CONSTRAINT `kategori_ibfk_2` FOREIGN KEY (`parent_id`) REFERENCES `kategori` (`id`) ON DELETE SET NULL;

--
-- Ketidakleluasaan untuk tabel `log_activity`
--
ALTER TABLE `log_activity`
  ADD CONSTRAINT `log_activity_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `log_scan_qr`
--
ALTER TABLE `log_scan_qr`
  ADD CONSTRAINT `log_scan_qr_ibfk_1` FOREIGN KEY (`distribusi_id`) REFERENCES `distribusi` (`id`),
  ADD CONSTRAINT `log_scan_qr_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `menu_harian`
--
ALTER TABLE `menu_harian`
  ADD CONSTRAINT `menu_harian_ibfk_1` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`),
  ADD CONSTRAINT `menu_harian_ibfk_2` FOREIGN KEY (`approved_by`) REFERENCES `users` (`id`),
  ADD CONSTRAINT `menu_harian_ibfk_3` FOREIGN KEY (`kantor_id`) REFERENCES `kantor` (`id`);

--
-- Ketidakleluasaan untuk tabel `menu_harian_detail`
--
ALTER TABLE `menu_harian_detail`
  ADD CONSTRAINT `menu_harian_detail_ibfk_1` FOREIGN KEY (`menu_id`) REFERENCES `menu_harian` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `menu_harian_detail_ibfk_2` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`),
  ADD CONSTRAINT `menu_harian_detail_ibfk_3` FOREIGN KEY (`pembelanjaan_id`) REFERENCES `pembelanjaan` (`id`);

--
-- Ketidakleluasaan untuk tabel `pembayaran_piutang`
--
ALTER TABLE `pembayaran_piutang`
  ADD CONSTRAINT `pembayaran_piutang_ibfk_1` FOREIGN KEY (`piutang_id`) REFERENCES `piutang` (`id`),
  ADD CONSTRAINT `pembayaran_piutang_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `pembelanjaan`
--
ALTER TABLE `pembelanjaan`
  ADD CONSTRAINT `pembelanjaan_ibfk_1` FOREIGN KEY (`supplier_id`) REFERENCES `supplier` (`id`),
  ADD CONSTRAINT `pembelanjaan_ibfk_2` FOREIGN KEY (`request_id`) REFERENCES `request` (`id`),
  ADD CONSTRAINT `pembelanjaan_ibfk_3` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `pembelanjaan_detail`
--
ALTER TABLE `pembelanjaan_detail`
  ADD CONSTRAINT `pembelanjaan_detail_ibfk_1` FOREIGN KEY (`pembelanjaan_id`) REFERENCES `pembelanjaan` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `pembelanjaan_detail_ibfk_2` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`);

--
-- Ketidakleluasaan untuk tabel `penerimaan_barang`
--
ALTER TABLE `penerimaan_barang`
  ADD CONSTRAINT `penerimaan_barang_ibfk_1` FOREIGN KEY (`pembelanjaan_id`) REFERENCES `pembelanjaan` (`id`),
  ADD CONSTRAINT `penerimaan_barang_ibfk_2` FOREIGN KEY (`supplier_id`) REFERENCES `supplier` (`id`),
  ADD CONSTRAINT `penerimaan_barang_ibfk_3` FOREIGN KEY (`penerima_id`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `penerimaan_detail`
--
ALTER TABLE `penerimaan_detail`
  ADD CONSTRAINT `penerimaan_detail_ibfk_1` FOREIGN KEY (`penerimaan_id`) REFERENCES `penerimaan_barang` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `penerimaan_detail_ibfk_2` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`);

--
-- Ketidakleluasaan untuk tabel `piutang`
--
ALTER TABLE `piutang`
  ADD CONSTRAINT `piutang_ibfk_1` FOREIGN KEY (`kantor_id`) REFERENCES `kantor` (`id`),
  ADD CONSTRAINT `piutang_ibfk_2` FOREIGN KEY (`distribusi_id`) REFERENCES `distribusi` (`id`);

--
-- Ketidakleluasaan untuk tabel `produk`
--
ALTER TABLE `produk`
  ADD CONSTRAINT `produk_ibfk_1` FOREIGN KEY (`jenis_barang_id`) REFERENCES `jenis_barang` (`id`),
  ADD CONSTRAINT `produk_ibfk_2` FOREIGN KEY (`kategori_id`) REFERENCES `kategori` (`id`),
  ADD CONSTRAINT `produk_ibfk_3` FOREIGN KEY (`satuan_id`) REFERENCES `satuan` (`id`);

--
-- Ketidakleluasaan untuk tabel `request`
--
ALTER TABLE `request`
  ADD CONSTRAINT `request_ibfk_1` FOREIGN KEY (`kantor_id`) REFERENCES `kantor` (`id`),
  ADD CONSTRAINT `request_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),
  ADD CONSTRAINT `request_ibfk_3` FOREIGN KEY (`approved_by`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `request_detail`
--
ALTER TABLE `request_detail`
  ADD CONSTRAINT `request_detail_ibfk_1` FOREIGN KEY (`request_id`) REFERENCES `request` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `request_detail_ibfk_2` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`);

--
-- Ketidakleluasaan untuk tabel `stok_opname`
--
ALTER TABLE `stok_opname`
  ADD CONSTRAINT `stok_opname_ibfk_1` FOREIGN KEY (`pic_id`) REFERENCES `users` (`id`),
  ADD CONSTRAINT `stok_opname_ibfk_2` FOREIGN KEY (`approved_by`) REFERENCES `users` (`id`);

--
-- Ketidakleluasaan untuk tabel `stok_opname_detail`
--
ALTER TABLE `stok_opname_detail`
  ADD CONSTRAINT `stok_opname_detail_ibfk_1` FOREIGN KEY (`opname_id`) REFERENCES `stok_opname` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `stok_opname_detail_ibfk_2` FOREIGN KEY (`produk_id`) REFERENCES `produk` (`id`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
